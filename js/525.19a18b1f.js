"use strict";(self["webpackChunkuerm_ehr"]=self["webpackChunkuerm_ehr"]||[]).push([[525],{9525:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Nt});var i=l(3673),a=l(2323);const s={key:0,class:"flex flex-center"},o={key:1},c={key:0},n={key:1,class:"row justify-center"},r=(0,i._)("div",{class:"col-12 text-center text-weight-light text-h5"}," MULTIPLE CASE NUMBER DETECTED, PLEASE SELECT THE APPROPRIATE CASE ",-1),d={class:"col-6"};function u(e,t,l,u,p,h){const m=(0,i.up)("PatientEncounterInfo"),g=(0,i.up)("MainEMR"),C=(0,i.up)("q-btn"),N=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(N,{class:(0,a.C_)({"flex flex-center":e.bools.isMultipleCaseNo})},{default:(0,i.w5)((()=>[this.bools.isLoading?((0,i.wg)(),(0,i.iD)("div",s)):((0,i.wg)(),(0,i.iD)("div",o,[e.bools.isMultipleCaseNo?((0,i.wg)(),(0,i.iD)("div",n,[r,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.testArr,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"q-pa-md",key:l},[(0,i._)("div",d,[(0,i.Wm)(C,{color:"blue-10",onClick:l=>e.caseRoute(t.case_no),label:t.case_no},null,8,["onClick","label"])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(m,{encounterCases:this.encounterCases},null,8,["encounterCases"]),(0,i.Wm)(g,{clinicalNoteCategories:e.clinicalNoteCategories},null,8,["clinicalNoteCategories"])]))]))])),_:1},8,["class"])}var p=l(8880);const h={class:"col-auto text-uppercase text-xs"},m={class:"col text-md"},g=(0,i.Uk)(" OTHER INFORMATION "),C={class:"q-px-lg relative-position"},N={class:"absolute-top-right q-pt-lg q-pr-md"},f=(0,i.Uk)("View Patient Dashboard"),w={class:"text-weight-light text-h5 row q-gutter-md q-py-lg"},b={class:"col-auto column"},y=(0,i._)("div",{class:"text-xs text-weight-medium"},"PATIENT NAME",-1),D={class:"col-auto column"},_=(0,i._)("div",{class:"text-xs text-weight-medium"},"CASE NO",-1),q={class:"row q-mt-md"},v={class:"col-md-9 q-px-sm"},x={class:"col-md-3 q-px-sm"};function E(e,t,l,s,o,c){const n=(0,i.up)("q-tab"),r=(0,i.up)("q-tabs"),d=(0,i.up)("q-tab-panel"),u=(0,i.up)("q-tab-panels"),E=(0,i.up)("q-separator"),Z=(0,i.up)("q-tooltip"),k=(0,i.up)("q-btn"),V=(0,i.up)("q-card-section"),I=(0,i.up)("ClinicalNotesDashboard"),R=(0,i.up)("PatientChart"),M=(0,i.up)("TestResult"),W=(0,i.up)("PatientInfo"),F=(0,i.up)("q-card-actions"),T=(0,i.up)("q-card"),Q=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),class:"text-primary bg-blue-grey-2","outside-arrows":"","mobile-arrows":"","indicator-color":"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{name:"encounterInfo",label:"ENCOUNTER INFO"}),(0,i.Wm)(n,{name:"otherInfo",label:"OTHER INFO"})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"encounterInfo",class:"row q-gutter-md"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.encounterInfo,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-auto column",key:t.label},[(0,i._)("div",h,(0,a.zw)(t.label),1),(0,i._)("div",m,(0,a.zw)(e.caseInfo[t.field]),1)])))),128))])),_:1}),(0,i.Wm)(d,{name:"otherInfo"},{default:(0,i.w5)((()=>[g])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(E,{spaced:"",color:"primary"}),(0,i._)("div",C,[(0,i._)("div",N,[(0,i.Wm)(k,{onClick:t[2]||(t[2]=(0,p.iM)((t=>e.bools.isDialogOpen=!0),["prevent"])),rounded:"",icon:"fas fa-procedures",flat:"",color:"primary",label:"Patient Dashboard"},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[f])),_:1})])),_:1})]),(0,i._)("div",w,[(0,i._)("div",b,[y,(0,i._)("div",null,(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)]),(0,i._)("div",D,[_,(0,i._)("div",null,(0,a.zw)(e.caseInfo.caseno),1)])])]),(0,i.Wm)(Q,{"full-height":"","full-width":"",persistent:"",modelValue:e.bools.isDialogOpen,"onUpdate:modelValue":t[4]||(t[4]=t=>e.bools.isDialogOpen=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{class:"column"},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{class:"col-auto text-h6 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Patient Dashboard: "+(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)])),_:1}),(0,i.Wm)(V,{class:"col",style:{overflow:"auto"}},{default:(0,i.w5)((()=>[(0,i._)("div",q,[(0,i._)("div",v,[(0,i.Wm)(I,{currentClinicalNotes:this.clinicalEncounters},null,8,["currentClinicalNotes"]),(0,i.Wm)(R,{patientno:e.caseInfo.patientno},null,8,["patientno"]),(0,i.Wm)(M,{patientno:e.caseInfo.patientno},null,8,["patientno"])]),(0,i._)("div",x,[(0,i.Wm)(W,{patientno:e.caseInfo.patientno},null,8,["patientno"])])])])),_:1}),(0,i.Wm)(F,{align:"right",class:"col-auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{color:"negative",label:"Close",flat:"",onClick:t[3]||(t[3]=(0,p.iM)((t=>e.bools.isDialogOpen=!1),["prevent"])),icon:"fas fa-times"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Z=l(303),k=l(7198),V=l(250);const I={class:"row"},R={key:0,class:"bg-red-2 q-pa-md"},M={class:"row justify-between items-center"},W={class:"column"},F=(0,i._)("div",{class:"text-xs"},"RESULT DATE",-1),T={class:"absolute-top-right"},Q={class:"row justify-between"},S={class:"text-uppercase"};function $(e,t,l,s,o,c){const n=(0,i.up)("Heading"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-scroll-area"),u=(0,i.up)("q-card-section"),p=(0,i.up)("q-card"),h=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{text:"Clinical Notes"}),(0,i.Wm)(d,{style:{height:"110px"},visible:""},{default:(0,i.w5)((()=>[(0,i._)("div",I,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.currentClinicalNotes,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-auto",key:t},[(0,i.Wm)(r,{label:t.clinical_note+" - "+t.user_name.toUpperCase()+" - "+new Date(t.update_datetime).toDateString().substring(4,15),flat:"",rounded:"",icon:"fas fa-eye",color:"primary",onClick:l=>e.openClinicalNoteDialog(t)},null,8,["label","onClick"])])))),128))]),0!=e.currentClinicalNotes.length||e.bools.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",R," No result Available "))])),_:1}),this.clinicalNoteResult.length>0?((0,i.wg)(),(0,i.j4)(h,{key:0,modelValue:this.bools.clinicalNoteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>this.bools.clinicalNoteDialog=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{square:"",style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i._)("div",M,[(0,i._)("div",null,(0,a.zw)(this.clinicalNoteCardDetails.title),1),(0,i._)("div",W,[F,(0,i._)("div",null,(0,a.zw)(new Date(this.clinicalNoteCardDetails.datetime).toDateString().substring(4,15)),1)])]),(0,i._)("div",T,[(0,i.Wm)(r,{flat:"",round:"",icon:"fa fa-times",onClick:t[0]||(t[0]=t=>e.bools.clinicalNoteDialog=!1),color:"negative"})])])),_:1}),(0,i.Wm)(u,{style:{height:"540px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"fit",visible:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalNoteResult,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"q-pb-md",key:e.label},[(0,i.Wm)(n,{text:e.opts.label},null,8,["text"]),(0,i.Wm)(p,{class:"shadow-0 q-pa-md"},{default:(0,i.w5)((()=>[(0,i._)("div",null,(0,a.zw)(e.value),1)])),_:2},1024)])))),128))])),_:1})])),_:1}),(0,i.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i._)("div",Q,[(0,i._)("div",S,(0,a.zw)(this.clinicalNoteCardDetails.user),1)])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)])}var P=l(4019);const A=(0,i.aZ)({name:"ClinicalNoteDashboard",props:["currentClinicalNotes"],components:{Heading:P.Z},data(){return{bools:{isLoading:!1,clinicalNoteDialog:!1},clinicalNoteResult:[],clinicalNoteCardDetails:{title:"",user:"",datetime:""}}},methods:{openClinicalNoteDialog(e){this.clinicalNoteCardDetails.title=e.clinical_note,this.clinicalNoteCardDetails.user=e.user_name,this.clinicalNoteCardDetails.datetime=e.formattedUpdateDatetime,this.clinicalNoteResult=e.result_format.fields,this.bools.clinicalNoteDialog=!0}}});var j=l(4260),U=l(7704),O=l(2165),L=l(6778),z=l(151),H=l(5589),B=l(7518),K=l.n(B);const Y=(0,j.Z)(A,[["render",$]]),G=Y;K()(A,"components",{QScrollArea:U.Z,QBtn:O.Z,QDialog:L.Z,QCard:z.Z,QCardSection:H.Z});var J=l(3617);const X=(0,i.aZ)({name:"PatientEncounterInfo",props:["selectedTab"],components:{PatientChart:Z.Z,TestResult:k.Z,PatientInfo:V.Z,ClinicalNotesDashboard:G},data(){return{tab:"encounterInfo",bools:{isDialogOpen:!1},details:{caseNo:null,name:null,birthdate:null,sex:null,patientCategory:null,chiefComplaint:null},encounterInfo:[{label:"Category",field:"category"},{label:"Room",field:"room"},{label:"Unit",field:"unit"},{label:"Ward",field:"ward"},{label:"Admission Date",field:"admitted"},{label:"Discharge Date",field:"discharged"},{label:"Chief Complaint",field:"chiefComplaint"}]}},computed:{...(0,J.Se)({encounterCases:"encounters/encounterCases",clinicalEncounters:"encounters/clinicalEncounters"}),caseInfo(){return 0==this.encounterCases.length?{}:this.encounterCases.map((e=>({caseno:e.case_no,patientno:e.patient_no,lastname:e.last_name,firstname:e.first_name,middlename:e.middle_name,gender:e.sex,birthdate:e.birthDate,category:e.patient_category,room:e.room,unit:e.room_unit,ward:e.ward,admitted:new Date(e.datetime_admitted).toDateString(),discharged:e.datetime_discharged?new Date(e.datetime_discharged).toDateString():"",chiefComplaint:e.chief_complaint})))[0]}},created(){this.checkCase()},methods:{async checkCase(){const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,patientNo:this.encounterCases[0].patient_no,checking:1};await this.$store.dispatch("encounters/getClinicalEncounters",t),this.clinicalTabLoading=!1}},watch:{encounterCases(e){1===e.length&&(this.details.caseNo=e[0].case_no,this.details.name=e[0].name,this.details.birthdate=e[0].birthDate,this.details.sex=e[0].sex,this.details.patientCategory=e[0].patient_category,this.details.chiefComplaint=e[0].clinical_impression)}}});var ee=l(7547),te=l(8408),le=l(5906),ie=l(6602),ae=l(5869),se=l(8870),oe=l(9367);const ce=(0,j.Z)(X,[["render",E]]),ne=ce;K()(X,"components",{QTabs:ee.Z,QTab:te.Z,QTabPanels:le.Z,QTabPanel:ie.Z,QSeparator:ae.Z,QBtn:O.Z,QTooltip:se.Z,QDialog:L.Z,QCard:z.Z,QCardSection:H.Z,QCardActions:oe.Z});const re={class:"bg-transparent"},de={class:"q-pa-md"},ue={key:0};function pe(e,t,l,a,s,o){const c=(0,i.up)("q-icon"),n=(0,i.up)("q-input"),r=(0,i.up)("q-tree"),d=(0,i.up)("q-tab"),u=(0,i.up)("q-tabs"),p=(0,i.up)("q-separator"),h=(0,i.up)("other-clinical-notes"),m=(0,i.up)("q-tab-panel"),g=(0,i.up)("clinical-note-fields"),C=(0,i.up)("q-tab-panels"),N=(0,i.up)("q-splitter"),f=(0,i.up)("q-card-section"),w=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",re,[(0,i.Wm)(w,{square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(N,{modelValue:e.splitterModel,"onUpdate:modelValue":t[7]||(t[7]=t=>e.splitterModel=t)},{before:(0,i.w5)((()=>[(0,i._)("div",de,[(0,i.Wm)(n,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:"Filter Clinical Notes"},{append:(0,i.w5)((()=>[""!==e.filter?((0,i.wg)(),(0,i.j4)(c,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):(0,i.kq)("",!0)])),_:1},8,["modelValue"]),(0,i.Wm)(r,{nodes:this.clinicalNoteCat,"node-key":"label","selected-color":"primary",selected:e.selected,"onUpdate:selected":t[1]||(t[1]=t=>e.selected=t),filter:e.filter,"default-expand-all":""},null,8,["nodes","selected","filter"])])])),after:(0,i.w5)((()=>[e.bools.showInputFields?((0,i.wg)(),(0,i.iD)("div",ue,[(0,i.Wm)(u,{modelValue:e.tab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tab=t),dense:"",class:"text-grey bg-blue-10","active-color":"white","indicator-color":"yellow-10",align:"justify","narrow-indicator":""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"clinicalNotes",label:"Clinical Notes"}),(0,i.Wm)(d,{name:"clinicalNotesEntry",label:"Clinical Notes Entry"})])),_:1},8,["modelValue"]),(0,i.Wm)(p),(0,i.Wm)(C,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=t=>e.tab=t),animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"clinicalNotes"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{clinicalNoteDetails:this.clinicalNoteDetails[0],clinicalEncounters:this.clinicalEncounters,onGetClinicalNotes:t[3]||(t[3]=e=>this.checkCase())},null,8,["clinicalNoteDetails","clinicalEncounters"])])),_:1}),(0,i.Wm)(m,{name:"clinicalNotesEntry"},{default:(0,i.w5)((()=>[this.clinicalNoteDetails.length>0?((0,i.wg)(),(0,i.j4)(g,{key:0,onGetClinicalNotes:t[4]||(t[4]=t=>e.tab="clinicalNotes"),onCloseAddDialog:t[5]||(t[5]=t=>e.addModal=!1)})):(0,i.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])):(0,i.kq)("",!0)])),_:1},8,["modelValue"])])])),_:1})])),_:1})])])}l(71);const he={class:"q-px-md"},me={class:"row justify-between"},ge=(0,i._)("div",null,null,-1);function Ce(e,t,l,a,s,o){const c=(0,i.up)("q-btn"),n=(0,i.up)("q-card"),r=(0,i.up)("q-separator"),d=(0,i.up)("Date"),u=(0,i.up)("Text"),p=(0,i.up)("Number"),h=(0,i.up)("Textarea"),m=(0,i.up)("Select"),g=(0,i.up)("ICD10"),C=(0,i.up)("NumberRange"),N=(0,i.up)("DateRange"),f=(0,i.up)("q-scroll-area");return(0,i.wg)(),(0,i.iD)("div",he,[(0,i.Wm)(n,{class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i._)("div",me,[ge,(0,i._)("div",null,[(0,i.Wm)(c,{color:"blue-10",push:"",rounded:"",label:"Save Clinical Note",icon:"fa fa-save",onClick:e.saveClinicalNoteEncounter},null,8,["onClick"])])])])),_:1}),(0,i.Wm)(r,{class:"q-my-sm"}),(0,i.Wm)(f,{style:{height:"450px"},ref:"scrollArea",visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalNoteTemplateFormat.fields,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"q-ma-md"},["date"==e.type?((0,i.wg)(),(0,i.j4)(d,{key:0,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==e.type?((0,i.wg)(),(0,i.j4)(u,{key:1,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==e.type?((0,i.wg)(),(0,i.j4)(p,{key:2,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==e.type?((0,i.wg)(),(0,i.j4)(h,{key:3,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"select"==e.type?((0,i.wg)(),(0,i.j4)(m,{key:4,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,options:e.options,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==e.type?((0,i.wg)(),(0,i.j4)(g,{key:5,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==e.type?((0,i.wg)(),(0,i.j4)(C,{key:6,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==e.type?((0,i.wg)(),(0,i.j4)(N,{key:7,opts:{label:e.name,requiredMsg:e.requiredMsg,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.clinicalFieldCode},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,i.kq)("",!0)])))),128))])),_:1},512)])}var Ne=l(2665),fe=l(6829),we=l(9076),be=l(24),ye=l(3564),De=l(1550),_e=l(1963),qe=l(3117);const ve=(0,i.aZ)({name:"ClinicalNoteFields",props:["panel"],computed:{...(0,J.Se)({colorEMR:"helpers/colorEMR",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails",clinicalNoteDetailValues:"clinicalNotes/clinicalNoteDetailValues",clinicalNoteTemplateFormat:"clinicalNotes/clinicalNoteTemplateFormat",encounterCases:"encounters/encounterCases"})},components:{Date:Ne.Z,Text:fe.Z,Number:we.Z,Textarea:be.Z,Select:ye.Z,ICD10:De.Z,NumberRange:_e.Z,DateRange:qe.Z},data(){return{clinicalInputFields:[],value:[],drowdownOptions:[],options:[],dropdownLoading:!1}},created(){this.addClinicalNoteDetails()},methods:{setClinicalInputFields(){this.clinicalInputFields=this.clinicalNoteDetails},addClinicalNoteDetails(){this.clinicalInputFields.push(this.clinicalNoteDetails)},filterDropdown(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.drowdownOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.drowdownOptions})},async getClinicalNoteDetailValues(e){this.dropdownLoading=!0,await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetailValues",e);var t=[];for(var l of this.clinicalNoteDetailValues)t.push(l.Value);this.drowdownOptions=t,this.dropdownLoading=!1},async saveClinicalNoteEncounter(){const e={caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/saveClinicalEncounter",e);if(!t[0].ERR){for(var l of this.$refs.clinicalNoteValue){const e={clinicalFieldCode:l.opts.clinicalFieldCode,clinicalNoteValue:l.value,clinicalEncounterID:t[0].ENCOUNTERID},i=await this.$store.dispatch("encounters/saveClinicalEncounterDetails",e);if(i[0].ERR)return this.showNotif("error",`Error saving ${i}`),!1}this.showNotif("success","Clinical Note Saved"),this.$emit("getClinicalNotes",!0)}},showNotif(e,t){let l="";l="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:l})}}});var xe=l(4842),Ee=l(4554),Ze=l(3944),ke=l(6915),Ve=l(8516),Ie=l(3414),Re=l(2035),Me=l(677);const We=(0,j.Z)(ve,[["render",Ce]]),Fe=We;K()(ve,"components",{QCard:z.Z,QInput:xe.Z,QIcon:Ee.Z,QPopupProxy:Ze.Z,QDate:ke.Z,QBtn:O.Z,QSelect:Ve.Z,QItem:Ie.Z,QItemSection:Re.Z,QSeparator:ae.Z,QScrollArea:U.Z}),K()(ve,"directives",{ClosePopup:Me.Z});const Te={class:"text-h6"},Qe={class:"row q-col-gutter-md justify-between"},Se={class:"col-auto"},$e=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"Created By",-1),Pe={class:"col text-md text-uppercase"},Ae={class:"col-auto"},je=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"SAVE DATE",-1),Ue={class:"col text-md text-uppercase"},Oe={key:1,style:{height:"450px"},class:"flex flex-center text-h5"};function Le(e,t,l,s,o,c){const n=(0,i.up)("q-card"),r=(0,i.up)("q-separator"),d=(0,i.up)("q-scroll-area"),u=(0,i.up)("clinical-note-details"),p=(0,i.up)("q-dialog"),h=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Te,(0,a.zw)(this.clinicalNoteDetails.clinical_note),1),(0,i.Uk)(" "+(0,a.zw)(this.clinicalNoteDetails.clinical_note_description),1)])])),_:1}),(0,i.Wm)(r,{class:"q-my-sm"}),this.clinicalEncounters.length>0?((0,i.wg)(),(0,i.j4)(n,{key:0,class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{style:{height:"450px"},ref:"scrollArea",visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalEncounters,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:"q-ma-md row q-col-gutter-md"},[(0,i.wy)(((0,i.wg)(),(0,i.j4)(n,{square:"",borderless:"",class:"shadow-1 full-width cursor-pointer q-pa-md bg-blue-10 text-white",style:{"border-left":"8px solid #f57f17 !important"},onClick:l=>e.showClinicalNoteDetails(t)},{default:(0,i.w5)((()=>[(0,i._)("div",Qe,[(0,i._)("div",Se,[$e,(0,i._)("div",Pe,(0,a.zw)(t.user_name)+" - "+(0,a.zw)(t.role),1)]),(0,i._)("div",Ae,[je,(0,i._)("div",Ue,(0,a.zw)(t.formattedUpdateDatetime),1)])])])),_:2},1032,["onClick"])),[[h]])])))),128))])),_:1},512)])),_:1})):((0,i.wg)(),(0,i.iD)("div",Oe," NO DATA AVAILABLE ")),(0,i.Wm)(p,{modelValue:e.clinicalNoteDialogDetails,"onUpdate:modelValue":t[1]||(t[1]=t=>e.clinicalNoteDialogDetails=t),"full-height":"","full-width":"",persistent:"",maximized:"",class:"q-pa-none q-ma-none",onCloseAddDialog:t[2]||(t[2]=t=>e.clinicalNoteDialogDetails=!1)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"q-pa-none q-ma-none",onCloseDialog:t[0]||(t[0]=t=>e.clinicalNoteDialogDetails=!1),selectedClinicalNote:this.selectedClinicalNote},null,8,["selectedClinicalNote"])])),_:1},8,["modelValue"])])}const ze={class:"row q-col-gutter-md justify-between"},He={class:"col-auto"},Be=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"Created By",-1),Ke={class:"col text-md text-uppercase"},Ye={class:"col-auto"},Ge=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"SAVE DATE",-1),Je={class:"col text-md text-uppercase"};function Xe(e,t,l,s,o,c){const n=(0,i.up)("q-card-section"),r=(0,i.up)("Date"),d=(0,i.up)("Text"),u=(0,i.up)("Number"),p=(0,i.up)("Textarea"),h=(0,i.up)("Select"),m=(0,i.up)("ICD10"),g=(0,i.up)("NumberRange"),C=(0,i.up)("DateRange"),N=(0,i.up)("q-scroll-area"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-btn-group"),b=(0,i.up)("q-card-actions"),y=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(y,{square:"",class:"q-pa-0 q-ma-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-blue-10 text-white fixed-top"},{default:(0,i.w5)((()=>[(0,i._)("div",ze,[(0,i._)("div",He,[Be,(0,i._)("div",Ke,(0,a.zw)(e.selectedClinicalNote.user_name)+" - "+(0,a.zw)(e.selectedClinicalNote.role),1)]),(0,i._)("div",Ye,[Ge,(0,i._)("div",Je,(0,a.zw)(e.selectedClinicalNote.formattedUpdateDatetime),1)])])])),_:1}),(0,i.Wm)(N,{class:"fit"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"q-mt-xl q-mb-xl"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.resultFormat,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"q-ma-md"},["date"==e.opts.type?((0,i.wg)(),(0,i.j4)(r,{key:0,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==e.opts.type?((0,i.wg)(),(0,i.j4)(d,{key:1,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==e.opts.type?((0,i.wg)(),(0,i.j4)(u,{key:2,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==e.opts.type?((0,i.wg)(),(0,i.j4)(p,{key:3,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"select"==e.opts.type?((0,i.wg)(),(0,i.j4)(h,{key:4,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,options:e.opts.options,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==e.opts.type?((0,i.wg)(),(0,i.j4)(m,{key:5,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,value:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==e.opts.type?((0,i.wg)(),(0,i.j4)(g,{key:6,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==e.opts.type?((0,i.wg)(),(0,i.j4)(C,{key:7,opts:{label:e.opts.label,requiredMsg:e.opts.requiredMsg,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,i.kq)("",!0)])))),128))])),_:1})])),_:1}),(0,i.Wm)(b,{align:"right",class:"q-pa-md bg-blue-10 text-white fixed-bottom"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[this.disableInput?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(f,{key:0,onClick:t[0]||(t[0]=t=>e.updateClinicalNote()),label:"Update",icon:"fa fa-save",color:"green"})),(0,i.Wm)(f,{onClick:t[1]||(t[1]=t=>e.closeDialog()),label:"Close",icon:"fa fa-times",color:"red"})])),_:1})])),_:1})])),_:1})}const et=(0,i.aZ)({name:"ClinicalNoteDetails",props:["selectedClinicalNote"],data(){return{resultFormat:[],disableInput:!1}},components:{Date:Ne.Z,Text:fe.Z,Number:we.Z,Textarea:be.Z,Select:ye.Z,ICD10:De.Z,NumberRange:_e.Z,DateRange:qe.Z},computed:{...(0,J.Se)({clinicalEncounters:"encounters/clinicalEncounters",userCredentials:"user/credentials",encounterCases:"encounters/encounterCases",clinicalEncounterDetails:"encounters/clinicalEncounterDetails"})},created(){this.formatResult()},methods:{formatResult(){this.resultFormat=this.selectedClinicalNote.result_format.fields,this.selectedClinicalNote.user_id!==this.userCredentials.userID&&(this.disableInput=!0)},async updateClinicalNote(){const e={clinicalEncounterID:this.selectedClinicalNote.clinical_encounter_id,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.selectedClinicalNote.clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/updateClinicalEncounter",e);if(!t[0].ERR){for(var l of this.$refs.clinicalNoteValue){var i=this.clinicalEncounterDetails.filter((e=>e.clinical_field_code===l.opts.clinicalFieldCode));const e={clinicalEncounterDetailID:i[0].id,clinicalFieldValue:l.value},t=await this.$store.dispatch("encounters/updateClinicalEncounterDetails",e);if(t[0].ERR)return this.showNotif("error",`Error saving ${t}`),!1}this.showNotif("success","Clinical Note Details Updated"),this.closeDialog()}},closeDialog(){this.$emit("closeDialog",!0)},showNotif(e,t){let l="";l="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:l})}}});var tt=l(6375);const lt=(0,j.Z)(et,[["render",Xe]]),it=lt;K()(et,"components",{QCard:z.Z,QCardSection:H.Z,QScrollArea:U.Z,QCardActions:oe.Z,QBtnGroup:tt.Z,QBtn:O.Z});const at=(0,i.aZ)({name:"OtherClinicalNotes",props:["clinicalNoteDetails","clinicalEncounters"],data(){return{selectedClinicalNote:[],clinicalNoteDialogDetails:!1}},watch:{clinicalNoteDialogDetails(e){e||(this.selectedClinicalNote=[],this.$emit("getClinicalNotes",!0))}},methods:{async showClinicalNoteDetails(e){this.selectedClinicalNote=e,this.clinicalNoteDialogDetails=!0;const t={clinicalEncounterID:e.clinical_encounter_id};await this.$store.dispatch("encounters/getClinicalEncounterDetails",t)}},components:{ClinicalNoteDetails:it}});var st=l(6489);const ot=(0,j.Z)(at,[["render",Le]]),ct=ot;K()(at,"components",{QCard:z.Z,QSeparator:ae.Z,QScrollArea:U.Z,QDialog:L.Z}),K()(at,"directives",{Ripple:st.Z});const nt=(0,i.aZ)({name:"MainEMR",props:["clinicalNoteCategories"],components:{ClinicalNoteFields:Fe,OtherClinicalNotes:ct},data(){return{tab:"clinicalNotes",bools:{showInputFields:!1},splitterModel:18,splitterMobileModel:25,mobileTabShow:!1,clinicalTabs:"",search:"",selectionMenu:!1,clinicalNoteCat:[],clinicalNoteHistory:[],clinicalTabLoading:!1,selected:"",filter:"",filterRef:null}},computed:{...(0,J.Se)({colorEMR:"helpers/colorEMR",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncounters:"encounters/clinicalEncounters",userRole:"helpers/userRole",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows",encounterCases:"encounters/encounterCases",clinicalCategoryNotes:"clinicalNotes/clinicalCategoryNotes",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails"})},watch:{selected(e){this.showClinicalDetails(e),this.checkCase()},clinicalCategoryNotes(e){this.clinicalNoteCat=e},async clinicalTabs(e){await this.getClinicalNotes(e)},clinicalNoteCat(e){e.length>0&&(this.clinicalTabs=e[0].code)},tab(e){this.showClinicalDetails(e),this.checkCase()}},async created(){this.clinicalNoteCat=this.clinicalCategoryNotes},methods:{async showClinicalDetails(e){var t="";for(var l of this.clinicalCategoryNotes){const i=l.children.filter((t=>t.label===e));if(void 0!==i[0]){const e={name:i[0].label,code:i[0].clinical_note_code,categoryCode:i[0].category_code,details:i[0]};t=e}else{const t=this.clinicalNoteCategories.filter((t=>t.label===e));t}}""!==t&&(await this.getClinicalNoteDetails(t.code),this.clinicalNoteDetails.length>0&&(this.bools.showInputFields=!0))},async scrollToTop(){this.$refs.scrollArea.setScrollPosition("vertical",1),await this.$store.dispatch("helpers/setInfiniteScroll",!0),await this.checkCase()},async selectSubgroup(){const e=!this.selectionMenu;this.selectionMenu=e},filterCN(e){const t=e.toUpperCase();var l=this.clinicalNoteCategories.filter((e=>e.filterName.includes(t)));this.clinicalNoteCat=l,0===l.length&&(this.clinicalTabs=[])},async fetchClinicalNotesCategories(){await this.$store.dispatch("clinicalNotes/fetchClinicalCategories"),this.clinicalNoteCat=this.clinicalNoteCategories},async getClinicalNotes(e){this.loadingTabs=!0,await this.$store.dispatch("clinicalNotes/fetchClinicalNotes",e),this.loadingTabs=!1},async checkCase(){this.clinicalTabLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted};await this.$store.dispatch("encounters/getCases",t);const l={caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,patientNo:this.encounterCases[0].patient_no,clinicalNotecode:this.clinicalNoteDetails[0].clinical_note_code};await this.$store.dispatch("encounters/getClinicalEncounters",l),this.clinicalTabLoading=!1},async getClinicalNoteDetails(e){await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetails",e)},resetFilter(){this.filter=""}}});var rt=l(218),dt=l(5551);const ut=(0,j.Z)(nt,[["render",pe]]),pt=ut;K()(nt,"components",{QCard:z.Z,QCardSection:H.Z,QSplitter:rt.Z,QInput:xe.Z,QIcon:Ee.Z,QTree:dt.Z,QTabs:ee.Z,QTab:te.Z,QSeparator:ae.Z,QTabPanels:le.Z,QTabPanel:ie.Z});const ht=(0,i.aZ)({name:"EMR",components:{PatientEncounterInfo:ne,MainEMR:pt},data(){return{bools:{isMultipleCaseNo:!0,isLoading:!1}}},computed:{...(0,J.Se)({rightDrawer:"helpers/drawerRight",colorEMR:"helpers/colorEMR",clinicalNoteCategories:"clinicalNotes/clinicalNoteCategories",showClinicalNoteDetails:"helpers/showClinicalNoteDetails",userRole:"helpers/userRole",encounterCases:"encounters/encounterCases",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows"})},created(){this.fetchNotesCategories(),this.checkCase()},methods:{async fetchNotesCategories(){await this.$store.dispatch("clinicalNotes/fetchClinicalCategories"),await this.$store.dispatch("clinicalNotes/fetchClinicalCategoryNotes")},async checkCase(){this.bools.isLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,paginated:1};await this.$store.dispatch("encounters/getCases",t),"emr-checked"===this.$route.name&&(this.bools.isMultipleCaseNo=!1),1===this.encounterCases.length&&(this.bools.isMultipleCaseNo=!1),this.bools.isLoading=!1},async caseRoute(e){const t=await this.$store.dispatch("helpers/encrypt",e);this.$router.push(`/emr/case/${t.encrypted}/checked`)}}});var mt=l(4379),gt=l(4752);const Ct=(0,j.Z)(ht,[["render",u]]),Nt=Ct;K()(ht,"components",{QPage:mt.Z,QSpinnerBars:gt.Z,QBtn:O.Z})}}]);
"use strict";(self["webpackChunkehr"]=self["webpackChunkehr"]||[]).push([[334],{8645:(e,l,t)=>{t.r(l),t.d(l,{default:()=>he});var s=t(3673),a=t(8880),i=t(2323);const o={key:0,class:"row justify-center"},n=(0,s.Uk)(" No medications available. "),r={key:2,class:"row"},c=(0,s.Uk)(" New Prescription "),d={class:"text-small text-gray-5"},m={class:"fixed-bottom text-center q-my-md"};function u(e,l,t,u,p,g){const h=(0,s.up)("q-circular-progress"),w=(0,s.up)("q-banner"),f=(0,s.up)("q-card-section"),v=(0,s.up)("Prescription"),b=(0,s.up)("q-scroll-area"),_=(0,s.up)("q-btn"),q=(0,s.up)("q-card-actions"),y=(0,s.up)("q-card"),k=(0,s.up)("q-dialog"),C=(0,s.up)("q-badge"),W=(0,s.up)("q-item-section"),x=(0,s.up)("q-item-label"),Z=(0,s.up)("q-item"),V=(0,s.up)("q-list");return(0,s.wg)(),(0,s.iD)("div",null,[e.bools.isLoading?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(h,{size:"lg",indeterminate:""})])):0==e.medications.length?((0,s.wg)(),(0,s.j4)(w,{key:1,class:"bg-red-2"},{default:(0,s.w5)((()=>[n])),_:1})):((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(k,{persistent:"",modelValue:e.bools.isDialogOpen,"onUpdate:modelValue":l[1]||(l[1]=l=>e.bools.isDialogOpen=l),"full-height":"","full-width":""},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"bg-dark column full-height",style:{width:"900px","max-width":"90vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"text-h6 text-weight-light text-white"},{default:(0,s.w5)((()=>[c])),_:1}),(0,s.Wm)(f,{class:"col"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{style:{height:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{onFetchPrescription:e.fetchPrescription},null,8,["onFetchPrescription"])])),_:1})])),_:1}),(0,s.Wm)(q,{class:"col-auto",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{color:"grey-3",outline:"",label:"Close",icon:"close",onClick:l[0]||(l[0]=(0,a.iM)((l=>e.bools.isDialogOpen=!1),["prevent"]))})])),_:1})])),_:1})])),_:1},8,["modelValue"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.medicationCases,(l=>((0,s.wg)(),(0,s.iD)("div",{key:l,class:"col-12 col-sm-6 col-md-4 q-pa-sm"},[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"bg-dark text-white"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.utcDate(e.getMedsFromCaseno(l)[0].date))+" | ",1),(0,s.Wm)(C,{label:l,color:"primary",class:"float-right"},null,8,["label"])])),_:2},1024),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{style:{height:"300px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(V,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.getMedsFromCaseno(l),((e,l)=>((0,s.wg)(),(0,s.j4)(Z,{key:e},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{side:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(l+1),1)])),_:2},1024),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s._)("div",d,"QTY: "+(0,i.zw)(e.qty),1),(0,s._)("div",null,[(0,s.Uk)((0,i.zw)(e.genName)+" ",1),(0,s._)("b",null,(0,i.zw)(e.brandName),1)])])),_:2},1024)])),_:2},1024),(0,s.Wm)(W,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{color:"dark",label:e.mg},null,8,["label"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])))),128))])),(0,s._)("div",m,[(0,s.Wm)(_,{icon:"fas fa-notes-medical",onClick:l[2]||(l[2]=l=>e.bools.isDialogOpen=!0),round:"",color:"primary"})])])}var p=t(3617);const g=e=>((0,s.dD)("data-v-6795d7d7"),e=e(),(0,s.Cn)(),e),h={class:"row items-center q-gutter-md"},w={class:"col"},f=g((()=>(0,s._)("div",{class:"text-small"},"BRAND NAME",-1))),v={class:"col"},b=g((()=>(0,s._)("div",{class:"text-small"},"GENERIC NAME",-1))),_={class:"col-auto"},q=g((()=>(0,s._)("div",{class:"text-small"},"Â ",-1))),y={class:"col-auto"},k=g((()=>(0,s._)("div",{class:"text-small"},"DOSAGE",-1))),C={class:"column"},W={class:"row"},x={class:"col-4 text-white q-pr-sm"},Z={key:0,class:"column q-mt-sm"},V={class:"q-px-xs column col-6"},D=g((()=>(0,s._)("div",{class:"text-small text-grey-6 text-weight-bold"}," BRAND ",-1))),Q={class:"q-px-xs column col-6"},N=g((()=>(0,s._)("div",{class:"text-small text-grey-6 text-weight-bold"}," GENERIC ",-1))),z={class:"q-px-xs column col-3"},I=g((()=>(0,s._)("div",{class:"text-small text-grey-6 text-weight-bold"}," ITEM CODE ",-1))),M={class:"q-px-xs column col-3"},U=g((()=>(0,s._)("div",{class:"text-small text-grey-6 text-weight-bold"}," DOSAGE ",-1))),P={class:"q-px-xs column col-6"},S={class:"q-px-xs column col-12 q-mt-sm"},O={class:"col q-pl-sm"},A={key:0,class:"row justify-center q-mt-md"};function L(e,l,t,o,n,r){const c=(0,s.up)("q-icon"),d=(0,s.up)("q-input"),m=(0,s.up)("q-btn"),u=(0,s.up)("q-btn-group"),p=(0,s.up)("q-card-section"),g=(0,s.up)("q-card-actions"),L=(0,s.up)("q-card"),E=(0,s.up)("q-dialog"),T=(0,s.up)("q-toggle"),B=(0,s.up)("q-form"),F=(0,s.up)("q-table"),j=(0,s.up)("q-circular-progress");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(E,{modelValue:e.isDialogOpen,"onUpdate:modelValue":l[5]||(l[5]=l=>e.isDialogOpen=l),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{dark:"",class:"bg-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s._)("div",w,[f,(0,s.Uk)(" "+(0,i.zw)(e.selected[0].brandName),1)]),(0,s._)("div",v,[b,(0,s.Uk)(" "+(0,i.zw)(e.selected[0].genName),1)]),(0,s._)("div",_,[q,(0,s.Uk)(" "+(0,i.zw)(e.selected[0].mg),1)]),(0,s._)("div",y,[k,(0,s.Uk)(" "+(0,i.zw)(e.selected[0].dosageForm),1)])]),(0,s._)("div",null,[(0,s.Wm)(d,{filled:"",dark:"",modelValue:e.item.qty,"onUpdate:modelValue":l[0]||(l[0]=l=>e.item.qty=l),type:"number",mask:"##",label:"Quantity",class:"q-mt-sm"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"fab fa-slack-hash"})])),_:1},8,["modelValue"])]),(0,s._)("div",null,[(0,s.Wm)(d,{filled:"",dark:"",modelValue:e.item.note,"onUpdate:modelValue":l[4]||(l[4]=l=>e.item.note=l),label:"Note",class:"q-mt-sm"},{append:(0,s.w5)((()=>[(0,s.Wm)(u,{flat:"",rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{size:"sm",label:"qd",onClick:l[1]||(l[1]=(0,a.iM)((l=>e.setNoteVal("Once a day")),["prevent"]))}),(0,s.Wm)(m,{size:"sm",label:"bid",onClick:l[2]||(l[2]=(0,a.iM)((l=>e.setNoteVal("Twice a day")),["prevent"]))}),(0,s.Wm)(m,{size:"sm",label:"tid",onClick:l[3]||(l[3]=(0,a.iM)((l=>e.setNoteVal("Thrice a day")),["prevent"]))})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,s.Wm)(g,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:(0,a.iM)(e.addPrescription,["prevent"]),label:"Add",icon:"fas fa-plus",color:"primary"},null,8,["onClick"]),(0,s.Wm)(m,{onClick:(0,a.iM)(e.cancelItem,["prevent"]),label:"Cancel",icon:"fas fa-times",color:"default",flat:""},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s._)("div",C,[(0,s.Wm)(B,{onSubmit:(0,a.iM)(e.searchItems,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{"label-color":"white",label:e.form.type?"Search: Brand Name":"Search: Generic Name",filled:"",dark:"",modelValue:e.form.search,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.search=l)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(T,{modelValue:e.form.type,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.type=l),size:"sm",dense:""},null,8,["modelValue"])])),append:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:(0,a.iM)(e.searchItems,["prevent"]),icon:"fas fa-search",color:"primary",round:""},null,8,["onClick"])])),_:1},8,["label","modelValue"])])),_:1},8,["onSubmit"]),(0,s._)("div",W,[(0,s._)("div",x,[e.prescriptions.length>0?((0,s.wg)(),(0,s.iD)("div",Z,[(0,s.Wm)(m,{color:"primary",onClick:e.savePrescription,label:"Save Prescription",icon:"save"},null,8,["onClick"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.prescriptions,(l=>((0,s.wg)(),(0,s.j4)(L,{class:"bg-grey-9 q-mt-sm",flat:"",key:l.itemCode},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{icon:"fas fa-times",size:"xs",round:"",class:"float-right q-mt-xs q-mr-xs",color:"negative",onClick:(0,a.iM)((t=>e.removeItem(l.itemCode)),["prevent"])},null,8,["onClick"]),(0,s.Wm)(p,{class:"row"},{default:(0,s.w5)((()=>[(0,s._)("div",V,[D,(0,s._)("div",null,(0,i.zw)(l.brandName),1)]),(0,s._)("div",Q,[N,(0,s._)("div",null,(0,i.zw)(l.genName),1)]),(0,s._)("div",z,[I,(0,s._)("div",null,(0,i.zw)(l.itemCode),1)]),(0,s._)("div",M,[U,(0,s._)("div",null,(0,i.zw)(l.dosageForm),1)]),(0,s._)("div",P,[(0,s.Wm)(d,{label:"Qty",mask:"##",type:"number",modelValue:l.qty,"onUpdate:modelValue":e=>l.qty=e,dark:"",filled:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("div",S,[(0,s.Wm)(d,{label:"Note",modelValue:l.note,"onUpdate:modelValue":e=>l.note=e,dark:"",filled:""},{append:(0,s.w5)((()=>[(0,s.Wm)(u,{flat:"",rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{size:"sm",label:"qd",onClick:(0,a.iM)((t=>e.setNoteVal("Once a day",l)),["prevent"])},null,8,["onClick"]),(0,s.Wm)(m,{size:"sm",label:"bid",onClick:(0,a.iM)((t=>e.setNoteVal("Twice a day",l)),["prevent"])},null,8,["onClick"]),(0,s.Wm)(m,{size:"sm",label:"tid",onClick:(0,a.iM)((t=>e.setNoteVal("Thrice a day",l)),["prevent"])},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1024)))),128)),e.prescriptions.length>3?((0,s.wg)(),(0,s.j4)(m,{key:0,class:"q-mt-sm",color:"primary",onClick:e.savePrescription,label:"Save Prescription",icon:"save"},null,8,["onClick"])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)]),(0,s._)("div",O,[(0,s.Wm)(F,{loading:e.bools.isLoading,dark:"","wrap-cells":"",rows:e.pharItems,"rows-per-page-options":[10,20,0],"row-key":"itemCode",selection:"multiple",selected:e.selected,"onUpdate:selected":l[8]||(l[8]=l=>e.selected=l),dense:""},null,8,["loading","rows","selected"])])])]),e.bools.isLoading?((0,s.wg)(),(0,s.iD)("div",A,[(0,s.Wm)(j,{indeterminate:"",size:"lg",color:"white"})])):(0,s.kq)("",!0)])}t(71);var E=t(6417);const T=(0,s.aZ)({name:"Prescription",data(){return{form:{search:null,type:!0},item:{qty:0,itemCode:null,note:""},prescriptions:[],bools:{isLoading:!1},selected:[]}},computed:{...(0,p.Se)("main",["pharItems"]),isDialogOpen(){return this.selected.length>0}},methods:{setNoteVal(e,l=null){null!=l&&(l.note=e),this.item.note=e},savePrescription(){const e=[];for(let l of this.prescriptions)e.push({itemCode:l.itemCode,qty:l.qty,note:l.note||""});console.log(e)},cancelItem(){this.selected=[],this.item.qty=1,this.item.itemCode=null,this.item.note=""},removeItem(e){this.prescriptions=this.prescriptions.filter((l=>l.itemCode!=e))},async searchItems(){if(""==this.form.search||null==this.form.search)return void E.Z.create({message:"Search item not found!"});if(this.form.search.search(/--/)>=0)return void E.Z.create({message:"Search query contains illegal characters!"});this.bools.isLoading=!0;const e={search:this.form.search,type:this.form.type?"brand":"generic"};await this.$store.dispatch("main/searchItems",e),this.bools.isLoading=!1},async addPrescription(){const e={...this.selected[0]};if(this.item.itemCode=e.itemCode,this.item.qty<=0)return void E.Z.create({message:"Please input desired quantity."});let l=this.prescriptions.filter((e=>e.itemCode==this.item.itemCode));if(l.length>0)return E.Z.create({color:"info",message:"Item quantity updated."}),l[0].qty=this.item.qty,void this.cancelItem();this.prescriptions.push({...this.item,...e}),this.cancelItem()}}});var B=t(4260),F=t(6778),j=t(151),G=t(5589),R=t(4842),Y=t(4554),H=t(6375),K=t(8240),$=t(9367),J=t(8689),X=t(8886),ee=t(7704),le=t(2571),te=t(6122),se=t(7518),ae=t.n(se);const ie=(0,B.Z)(T,[["render",L],["__scopeId","data-v-6795d7d7"]]),oe=ie;ae()(T,"components",{QDialog:F.Z,QCard:j.Z,QCardSection:G.Z,QInput:R.Z,QIcon:Y.Z,QBtnGroup:H.Z,QBtn:K.Z,QCardActions:$.Z,QForm:J.Z,QToggle:X.Z,QScrollArea:ee.Z,QTable:le.Z,QCircularProgress:te.Z});const ne=(0,s.aZ)({name:"Medications",components:{Prescription:oe},computed:{...(0,p.Se)("patients",["medications","medicationCases"])},data(){return{bools:{isLoading:!1,isDialogOpen:!1}}},methods:{async getMedications(){await this.$store.dispatch("patients/medications",this.$route.params.patientno)},fetchPrescription(e){console.log(e)},utcDate(e){let l=new Date(e).toUTCString();return l=l.substring(0,16),l},getMedsFromCaseno(e){return this.medications.filter((l=>l.caseno==e))}},async mounted(){this.bools.isLoading=!0,await this.getMedications(),this.bools.isLoading=!1}});var re=t(5607),ce=t(9721),de=t(7011),me=t(3414),ue=t(2035),pe=t(2350);const ge=(0,B.Z)(ne,[["render",u],["__scopeId","data-v-1e9c42d0"]]),he=ge;ae()(ne,"components",{QCircularProgress:te.Z,QBanner:re.Z,QDialog:F.Z,QCard:j.Z,QCardSection:G.Z,QScrollArea:ee.Z,QCardActions:$.Z,QBtn:K.Z,QBadge:ce.Z,QList:de.Z,QItem:me.Z,QItemSection:ue.Z,QItemLabel:pe.Z})}}]);
"use strict";(self["webpackChunkuerm_ehr"]=self["webpackChunkuerm_ehr"]||[]).push([[827],{827:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Xt});var l=i(3673),a=i(2323);const o={key:0,class:"flex flex-center"},n={key:1},s={key:0},c={key:1,class:"row justify-center"},r=(0,l._)("div",{class:"col-12 text-center text-weight-light text-h5"}," MULTIPLE CASE NUMBER DETECTED, PLEASE SELECT THE APPROPRIATE CASE ",-1),d=[r];function u(e,t,i,r,u,p){const h=(0,l.up)("PatientEncounterInfo"),f=(0,l.up)("MainEMR"),m=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(m,{class:(0,a.C_)({"flex flex-center":e.bools.isMultipleCaseNo})},{default:(0,l.w5)((()=>[this.bools.isLoading?((0,l.wg)(),(0,l.iD)("div",o)):((0,l.wg)(),(0,l.iD)("div",n,[e.bools.isMultipleCaseNo?((0,l.wg)(),(0,l.iD)("div",c,d)):((0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(h,{encounterCases:this.encounterCases,clinicalNoteCategoryTree:this.generalNotes},null,8,["encounterCases","clinicalNoteCategoryTree"]),(0,l.Wm)(f,{clinicalNoteCategories:e.clinicalNoteCategories,clinicalNoteCategoryTree:e.clinicalNoteCategoryTree},null,8,["clinicalNoteCategories","clinicalNoteCategoryTree"])]))]))])),_:1},8,["class"])}var p=i(8880);const h={class:"row q-col-gutter-md justify-center items-center"},f=(0,l._)("br",null,null,-1),m=(0,l.Uk)(" OTHER INFORMATION "),N={class:"q-px-lg relative-position"},g={class:"absolute-top-right q-pt-lg q-pr-md"},_=(0,l.Uk)("View Patient Dashboard"),b={class:"text-weight-light text-h5 row q-gutter-md q-py-md"},w={class:"col-auto column"},C=(0,l._)("div",{class:"text-xs text-weight-medium"},"PATIENT NAME",-1),y={class:"col-auto column"},v=(0,l._)("div",{class:"text-xs text-weight-medium"},"CASE NO",-1),I={class:"text-weight-light text-h5 row q-gutter-md q-py-sm"},q={class:"col-auto text-uppercase text-xs text-weight-medium"},D={class:"col text-md"},k={class:"fit row wrap justify-between items-start content-start q-px-md"},E={class:"text-uppercase"},x={class:"q-ml-md q-pa-md"},T={key:0},Z={key:0},S={key:0},M={key:1},F=(0,l._)("br",null,null,-1),V=(0,l._)("div",{class:"q-pt-md text-h5 text-overline"}," PLEASE SELECT A CLINICAL NOTE ",-1),L={class:"row q-mt-md"},Q={class:"col-md-9 q-px-sm"},R={class:"col-md-3 q-px-sm"};function W(e,t,i,o,n,s){const c=(0,l.up)("q-tab"),r=(0,l.up)("q-tabs"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-card-section"),W=(0,l.up)("q-card"),$=(0,l.up)("q-tab-panel"),O=(0,l.up)("q-tab-panels"),P=(0,l.up)("q-separator"),G=(0,l.up)("q-tooltip"),j=(0,l.up)("q-btn"),U=(0,l.up)("clinical-note-hierarchy"),A=(0,l.up)("GeneralNoteEntry"),z=(0,l.up)("q-spinner-ball"),B=(0,l.up)("q-inner-loading"),H=(0,l.up)("q-splitter"),K=(0,l.up)("q-scroll-area"),Y=(0,l.up)("q-dialog"),J=(0,l.up)("ClinicalNotesDashboard"),X=(0,l.up)("PatientChart"),ee=(0,l.up)("TestResult"),te=(0,l.up)("PatientInfo"),ie=(0,l.up)("q-card-actions"),le=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),class:"text-primary bg-blue-grey-2","outside-arrows":"","mobile-arrows":"","indicator-color":"warning"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"generalInfo",label:"GENERAL MEDICAL NOTES"}),(0,l.Wm)(c,{name:"otherInfo",label:"OTHER INFO"})])),_:1},8,["modelValue"]),(0,l.Wm)(O,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:"",class:""},{default:(0,l.w5)((()=>[(0,l.Wm)($,{name:"generalInfo"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.generalNotes,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t.label},[(0,l.wy)(((0,l.wg)(),(0,l.j4)(W,{class:"cursor-pointer bg-blue-10 text-white shadow-0",borderless:"",onClick:i=>e.openGeneralDataDialog(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{align:"center",class:"q-px-md q-py-sm text-overline text-uppercase"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:t.icon,size:"sm"},null,8,["name"]),f,(0,l.Uk)(" "+(0,a.zw)(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[le]])])))),128))])])),_:1}),(0,l.Wm)($,{name:"otherInfo"},{default:(0,l.w5)((()=>[m])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(P,{color:"blue-7",size:"2px"}),(0,l._)("div",N,[(0,l._)("div",g,[(0,l.Wm)(j,{onClick:t[2]||(t[2]=(0,p.iM)((t=>e.bools.isDialogOpen=!0),["prevent"])),rounded:"",icon:"fas fa-procedures",flat:"",color:"primary",label:"Patient Dashboard"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[_])),_:1})])),_:1})]),(0,l._)("div",b,[(0,l._)("div",w,[C,(0,l._)("div",null,(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)]),(0,l._)("div",y,[v,(0,l._)("div",null,(0,a.zw)(e.caseInfo.caseno),1)])]),(0,l.Wm)(P),(0,l._)("div",I,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.encounterInfo,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-auto column",key:t.label},[(0,l._)("div",q,(0,a.zw)(t.label),1),(0,l._)("div",D,(0,a.zw)(e.caseInfo[t.field]),1)])))),128))])]),(0,l.Wm)(Y,{modelValue:e.bools.isGeneralInfoOpen,"onUpdate:modelValue":t[8]||(t[8]=t=>e.bools.isGeneralInfoOpen=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"q-ma-md",style:{height:"100vh","max-width":"100vw"},square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"text-h5 text-weight-light bg-blue-10 text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",k,[(0,l._)("div",E,(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`)+" - "+(0,a.zw)(this.clinicalNoteInfo.clinicalCategoryName),1),(0,l.Wm)(j,{color:"negative",label:"Close",onClick:t[3]||(t[3]=(0,p.iM)((t=>e.bools.isGeneralInfoOpen=!1),["prevent"])),icon:"fas fa-times"})])])),_:1}),(0,l.Wm)(K,{class:"q-pa-md",style:{height:"87.5vh",width:"93vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{modelValue:e.splitterModel,"onUpdate:modelValue":t[7]||(t[7]=t=>e.splitterModel=t)},{before:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(U,{clinicalNoteTree:this.clinicalNoteTree,clinicalEncounters:this.clinicalEncounters,onOpenEntryNotes:e.setEntryNotes,onSetUpdateNote:e.setUpdateNote},null,8,["clinicalNoteTree","clinicalEncounters","onOpenEntryNotes","onSetUpdateNote"])])])),after:(0,l.w5)((()=>[(0,l._)("div",x,[(0,l._)("div",{style:{height:"80vh"},class:(0,a.C_)([[this.bools.noteMode?"":"flex flex-center"],"text-center"])},[this.bools.noteMode?((0,l.wg)(),(0,l.iD)("div",T,[this.bools.generalNoteLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Z,[null!==this.clinicalNoteInfo.format?((0,l.wg)(),(0,l.iD)("div",S,[e.bools.generalEntryLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(A,{key:0,clinicalNoteInfo:this.clinicalNoteInfo,editNoteInfo:this.editNoteInfo,onCheckGeneralNotes:t[4]||(t[4]=t=>e.fetchGeneralNotes()),onSetClinicalNoteFormat:t[5]||(t[5]=t=>e.setClinicalNotes(this.clinicalNoteInfo)),onGoBackToSelection:t[6]||(t[6]=t=>e.setInit())},null,8,["clinicalNoteInfo","editNoteInfo"]))])):(0,l.kq)("",!0)])),(0,l.Wm)(B,{showing:e.bools.generalNoteLoading},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{size:"50px",color:"primary"})])),_:1},8,["showing"])])):((0,l.wg)(),(0,l.iD)("div",M,[(0,l.Wm)(d,{name:"fa fa-exclamation-circle",size:"xl"}),F,V]))],2)])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Y,{"full-height":"","full-width":"",persistent:"",modelValue:e.bools.isDialogOpen,"onUpdate:modelValue":t[10]||(t[10]=t=>e.bools.isDialogOpen=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"column"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"col-auto text-h6 text-weight-light bg-dark text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Patient Dashboard: "+(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)])),_:1}),(0,l.Wm)(u,{class:"col",style:{overflow:"auto"}},{default:(0,l.w5)((()=>[(0,l._)("div",L,[(0,l._)("div",Q,[(0,l.Wm)(J,{currentClinicalNotes:this.clinicalEncounterLists},null,8,["currentClinicalNotes"]),(0,l.Wm)(X,{patientno:e.caseInfo.patientno},null,8,["patientno"]),(0,l.Wm)(ee,{patientno:e.caseInfo.patientno},null,8,["patientno"])]),(0,l._)("div",R,[(0,l.Wm)(te,{patientno:e.caseInfo.patientno},null,8,["patientno"])])])])),_:1}),(0,l.Wm)(ie,{align:"right",class:"col-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{color:"negative",label:"Close",flat:"",onClick:t[9]||(t[9]=(0,p.iM)((t=>e.bools.isDialogOpen=!1),["prevent"])),icon:"fas fa-times"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var $=i(303),O=i(7198),P=i(250);const G={class:"row"},j={key:0,class:"bg-red-2 q-pa-md"},U={class:"row justify-between items-center"},A={class:"column"},z=(0,l._)("div",{class:"text-xs"},"RESULT DATE",-1),B={class:"absolute-top-right"},H={class:"row justify-between"},K={class:"text-uppercase"};function Y(e,t,i,o,n,s){const c=(0,l.up)("Heading"),r=(0,l.up)("q-btn"),d=(0,l.up)("q-scroll-area"),u=(0,l.up)("q-card-section"),p=(0,l.up)("q-card"),h=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{text:"Clinical Notes"}),(0,l.Wm)(d,{style:{height:"110px"},visible:""},{default:(0,l.w5)((()=>[(0,l._)("div",G,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.currentClinicalNotes,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-auto",key:t},[(0,l.Wm)(r,{label:t.clinical_note+" - "+t.user_name.toUpperCase()+" - "+new Date(t.update_datetime).toDateString().substring(4,15),flat:"",rounded:"",icon:"fas fa-eye",color:"primary",onClick:i=>e.openClinicalNoteDialog(t)},null,8,["label","onClick"])])))),128))]),0!=e.currentClinicalNotes.length||e.bools.isLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",j," No result Available "))])),_:1}),this.clinicalNoteResult.length>0?((0,l.wg)(),(0,l.j4)(h,{key:0,modelValue:this.bools.clinicalNoteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>this.bools.clinicalNoteDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{square:"",style:{width:"700px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",U,[(0,l._)("div",null,(0,a.zw)(this.clinicalNoteCardDetails.title),1),(0,l._)("div",A,[z,(0,l._)("div",null,(0,a.zw)(new Date(this.clinicalNoteCardDetails.datetime).toDateString().substring(4,15)),1)])]),(0,l._)("div",B,[(0,l.Wm)(r,{flat:"",round:"",icon:"fa fa-times",onClick:t[0]||(t[0]=t=>e.bools.clinicalNoteDialog=!1),color:"negative"})])])),_:1}),(0,l.Wm)(u,{style:{height:"540px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"fit",visible:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.clinicalNoteResult,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"q-pb-md",key:e.label},[(0,l.Wm)(c,{text:e.opts.label},null,8,["text"]),(0,l.Wm)(p,{class:"shadow-0 q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,a.zw)(e.value),1)])),_:2},1024)])))),128))])),_:1})])),_:1}),(0,l.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",H,[(0,l._)("div",K,(0,a.zw)(this.clinicalNoteCardDetails.user),1)])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])}var J=i(4019);const X=(0,l.aZ)({name:"ClinicalNoteDashboard",props:["currentClinicalNotes"],components:{Heading:J.Z},data(){return{bools:{isLoading:!1,clinicalNoteDialog:!1},clinicalNoteResult:[],clinicalNoteCardDetails:{title:"",user:"",datetime:""}}},methods:{openClinicalNoteDialog(e){this.clinicalNoteCardDetails.title=e.clinical_note,this.clinicalNoteCardDetails.user=e.user_name,this.clinicalNoteCardDetails.datetime=e.formattedUpdateDatetime,this.clinicalNoteResult=e.result_format.fields,this.bools.clinicalNoteDialog=!0}}});var ee=i(4260),te=i(7704),ie=i(2165),le=i(6778),ae=i(151),oe=i(5589),ne=i(7518),se=i.n(ne);const ce=(0,ee.Z)(X,[["render",Y]]),re=ce;se()(X,"components",{QScrollArea:te.Z,QBtn:ie.Z,QDialog:le.Z,QCard:ae.Z,QCardSection:oe.Z});var de=i(3617);const ue={key:0},pe={key:1,style:{height:"929px"}},he={class:"row justify-between"},fe=(0,l._)("div",null,null,-1);function me(e,t,i,a,o,n){const s=(0,l.up)("Date"),c=(0,l.up)("Text"),r=(0,l.up)("TextAutogrow"),d=(0,l.up)("Number"),u=(0,l.up)("Textarea"),h=(0,l.up)("Select"),f=(0,l.up)("ICD10"),m=(0,l.up)("NumberRange"),N=(0,l.up)("DateRange"),g=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),b=(0,l.up)("q-scroll-area"),w=(0,l.up)("q-spinner-gears"),C=(0,l.up)("q-inner-loading"),y=(0,l.up)("q-btn"),v=(0,l.up)("q-btn-group"),I=(0,l.up)("q-form");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(I,{onSubmit:e.confirmSaveGeneralData},{default:(0,l.w5)((()=>[(0,l._)("div",null,[e.bools.generalNoteLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(b,{key:0,style:{height:"70vh"},ref:"scrollArea",visible:!0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.clinicalInputFields,((t,i)=>((0,l.wg)(),(0,l.iD)("div",{key:i},[(0,l.Wm)(_,{borderless:"",class:"shadow-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"q-pa-none"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a,class:"q-pb-md"},[t.active?((0,l.wg)(),(0,l.iD)("div",ue,["date"==t.type?((0,l.wg)(),(0,l.j4)(s,{key:0,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==t.type?((0,l.wg)(),(0,l.j4)(c,{key:1,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textAutogrow"==t.type?((0,l.wg)(),(0,l.j4)(r,{key:2,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==t.type?((0,l.wg)(),(0,l.j4)(d,{key:3,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:4,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue",onKeydown:(0,p.D2)((0,p.iM)(e.confirmSaveGeneralData,["shift","exact","prevent"]),["enter"])},null,8,["opts","onKeydown"])):"select"==t.type?((0,l.wg)(),(0,l.j4)(h,{key:5,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,options:t.options,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==t.type?((0,l.wg)(),(0,l.j4)(f,{key:6,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==t.type?((0,l.wg)(),(0,l.j4)(m,{key:7,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==t.type?((0,l.wg)(),(0,l.j4)(N,{key:8,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:i,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])))),128))])),_:2},1024)])),_:2},1024)])))),128))])),_:1},512)),e.bools.generalNoteLoading?((0,l.wg)(),(0,l.iD)("div",pe)):(0,l.kq)("",!0),(0,l.Wm)(C,{showing:e.bools.generalNoteLoading},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"50px",color:"primary"})])),_:1},8,["showing"]),(0,l.Wm)(_,{class:"shadow-0",borderless:""},{default:(0,l.w5)((()=>[(0,l._)("div",he,[fe,(0,l._)("div",null,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[this.bools.updateMode?((0,l.wg)(),(0,l.j4)(y,{key:1,color:"blue-10",push:"",label:`Update ${this.clinicalNoteInfo.name}`,icon:"fa fa-edit",onClick:e.updateGeneralData,disable:e.bools.disableInput},null,8,["label","onClick","disable"])):((0,l.wg)(),(0,l.j4)(y,{key:0,type:"submit",color:"blue-10",push:"",label:`Save ${this.clinicalNoteInfo.name}`,icon:"fa fa-save",disable:e.bools.disableInput},null,8,["label","disable"]))])),_:1})])])])),_:1})])])),_:1},8,["onSubmit"])])}i(71),i(2100);var Ne=i(9172),ge=i(6397),_e=i(5617),be=i(7050),we=i(6047),Ce=i(1550),ye=i(5191),ve=i(877),Ie=i(9355);const qe=(0,l.aZ)({name:"GeneralDataDialog",props:["clinicalNoteInfo","editNoteInfo"],computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails",clinicalNoteDetailValues:"clinicalNotes/clinicalNoteDetailValues",clinicalNoteTemplateFormat:"clinicalNotes/clinicalNoteTemplateFormat",encounterCases:"encounters/encounterCases",templateDetails:"clinicalNotes/templateDetails"})},components:{Date:Ne.Z,Text:ge.Z,Number:_e.Z,Textarea:be.Z,Select:we.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:ve.Z,TextAutogrow:Ie.Z},data(){return{clinicalInputFields:[],value:[],drowdownOptions:[],options:[],dropdownLoading:!1,bools:{generalNoteLoading:!1,updateMode:!1,disableInput:!1}}},created(){this.setClinicalInputFields(),void 0!==this.editNoteInfo.clinical_note_code&&this.setUpdateInputFields(this.editNoteInfo),this.setInitValuesFields()},methods:{setInitValuesFields(e){},setClinicalInputFields(){this.disableInput=!0,this.clinicalInputFields=[],this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1},setUpdateInputFields(e){this.bools.updateMode=!0,this.disableInput=!0,this.clinicalInputFields=[],this.clinicalInputFields.push(e.result_format.fields),this.disableInput=!1},newEntry(){this.disableInput=!0,this.bools.updateMode=!1,this.bools.generalNoteLoading=!0,setTimeout((()=>{this.bools.generalNoteLoading=!1,this.clinicalInputFields=[],this.$emit("setClinicalNoteFormat",!0),this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1}),500)},addNewNote(){this.disableInput=!0,this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1},addClinicalNoteDetails(){this.clinicalInputFields.push(this.clinicalNoteDetails)},goBackToSelection(){this.$emit("goBackToSelection",!0)},filterDropdown(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.drowdownOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.drowdownOptions})},async updateGeneralData(){let e="",t="",i="",l="1";for(const[n,s]of this.clinicalInputFields.entries()){let a=[];for(const[i,l]of this.$refs.clinicalNoteValue.entries())if(l.opts.index===n){let i=void 0===this.clinicalNoteInfo.title?null:this.clinicalNoteInfo.title;null!==i?this.clinicalNoteInfo.title.toUpperCase()===l.opts.label.toUpperCase()?e=`${void 0===l.value?"":l.value} - ${this.clinicalNoteInfo.name}`:t=this.clinicalNoteInfo.title:e=this.clinicalNoteInfo.title;const o={index:n,label:l.opts.label,name:l.opts.label,required:l.opts.required,requiredMessage:l.opts.requiredMessage,options:void 0===l.opts.options?"":l.opts.options,type:l.opts.type,code:l.opts.clinicalFieldCode,clinical_field_code:l.opts.clinicalFieldCode,remarks:null,value:void 0===l.value?"":l.value,active:1,id:l.opts.id};a.push(o)}const o=a.filter((e=>e.index===n));let s={caseNo:this.encounterCases[0].case_no,clinicalNoteCode:this.clinicalNoteInfo.clinicalNoteCode,clinicalNoteStatus:1,fields:o,title:this.clinicalNoteInfo.title};const c={case_no:this.encounterCases[0].case_no,clinical_note_code:this.clinicalNoteInfo.clinicalNoteCode,status:1,chief_complain_icd:"",chief_complaint_remarks:"",clinical_impression_icd:"",clinical_impression_remarks:"",updated_by:l,result_format:JSON.stringify(s),remarks:"",details:o,description:""===e?t:e};i=c}const a={clinicalEncounterID:this.editNoteInfo.clinical_encounter_id,finalUpdateData:i},o=await this.$store.dispatch("encounters/updatePatientEncounterDetails",a);void 0!==o.success&&this.showNotif("success","Success saving Patient General Data"),this.bools.generalNoteLoading=!1,this.$emit("checkGeneralNotes",!0),this.setClinicalInputFields(),this.goBackToSelection()},async confirmSaveGeneralData(){this.$q.dialog({title:"Confirmation",message:"Are you sure you want to save this Clinical Note?",cancel:!0,persistent:!0}).onOk((()=>{this.saveGeneralData()})).onCancel((()=>{console.log(">>>> Cancel")}))},async saveGeneralData(){this.bools.generalNoteLoading=!0;let e="1",t="",i="",l=[];for(const[o,n]of this.clinicalInputFields.entries()){let a=[];for(const[e,l]of this.$refs.clinicalNoteValue.entries())if(l.opts.index===o){let e=void 0===this.clinicalNoteInfo.title?null:this.clinicalNoteInfo.title;null!==e?this.clinicalNoteInfo.title.toUpperCase()===l.opts.label.toUpperCase()?t=`${void 0===l.value?"":l.value} - ${this.clinicalNoteInfo.name}`:i=this.clinicalNoteInfo.title:t=this.clinicalNoteInfo.title;const n={index:o,label:l.opts.label,name:l.opts.label,required:l.opts.required,requiredMessage:l.opts.requiredMessage,options:l.opts.options,type:l.opts.type,code:l.opts.clinicalFieldCode,clinical_field_code:l.opts.clinicalFieldCode,remarks:null,value:void 0===l.value?"":l.value,active:1};a.push(n)}const n=a.filter((e=>e.index===o));let s={caseNo:this.encounterCases[0].case_no,clinicalNoteCode:this.clinicalNoteInfo.clinicalNoteCode,clinicalNoteStatus:1,fields:n,description:""===t?i:t};const c={case_no:this.encounterCases[0].case_no,status:1,chief_complain_icd:"",chief_complaint_remarks:"",clinical_impression_icd:"",clinical_impression_remarks:"",created_by:e,clinical_note_code:this.clinicalNoteInfo.clinicalNoteCode,result_format:s,remarks:"",details:n,description:""===t?i:t};l.push(c)}console.log(l,"finalGeneralData");const a=await this.$store.dispatch("encounters/savePatientEncounterDetails",l);void 0!==a.success&&this.showNotif("success","Success saving Patient General Data"),this.bools.generalNoteLoading=!1,this.$emit("checkGeneralNotes",!0),this.setClinicalInputFields(),this.goBackToSelection()},showNotif(e,t){let i="";i="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:i})}}});var De=i(5269),ke=i(6941),Ee=i(6394),xe=i(6375);const Te=(0,ee.Z)(qe,[["render",me]]),Ze=Te;se()(qe,"components",{QForm:De.Z,QScrollArea:te.Z,QCard:ae.Z,QCardSection:oe.Z,QInnerLoading:ke.Z,QSpinnerGears:Ee.Z,QBtnGroup:xe.Z,QBtn:ie.Z});const Se=(0,l.aZ)({name:"MainTableEMR",props:["clinicalNote","columnTable","rowTable"],data(){return{columns:[{name:"desc",required:!0,label:"Dessert (100g serving)",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"calories",align:"center",label:"Calories",field:"calories",sortable:!0},{name:"fat",label:"Fat (g)",field:"fat",sortable:!0},{name:"carbs",label:"Carbs (g)",field:"carbs"}],rows:[{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67}],filter:""}},mounted(){},methods:{openNoteMode(){this.$emit("openNoteMode",!0)}}});var Me=i(8107),Fe=i(4842),Ve=i(4554);se()(Se,"components",{QTable:Me.Z,QBtn:ie.Z,QInput:Fe.Z,QIcon:Ve.Z});const Le={class:"row justify-between bg-grey-4 items-center text-uppercase"},Qe={class:"text-weight-light text-h5 q-pa-md"},Re={key:0},We={class:"stripped"},$e={class:"q-pa-md col-4 text-weight-bold"},Oe={class:"q-pa-md col-8"},Pe={class:"q-pa-sm row items-center justify-end"},Ge={class:"row justify-between bg-grey-4 items-center text-uppercase"},je={class:"text-weight-light text-h5 q-pa-md"},Ue={class:"flex flex-center column q-pa-md"},Ae={key:1},ze={key:2,class:"text-h6 text-uppercase text-weight-light"};function Be(e,t,i,o,n,s){const c=(0,l.up)("ClinicalNoteTree"),r=(0,l.up)("q-scroll-area"),d=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),h=(0,l.up)("q-icon"),f=(0,l.up)("q-card-section"),m=(0,l.up)("q-card"),N=(0,l.up)("q-slide-transition"),g=(0,l.up)("q-splitter"),_=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(g,{modelValue:e.splitterModel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.splitterModel=t),style:{height:"84vh"}},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"fit"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{clinicalNoteTree:this.clinicalNoteTree,onSetInit:t[0]||(t[0]=e=>this.init()),onSetTicked:e.setTicked,onSetClinicalNote:e.setClinicalNote},null,8,["clinicalNoteTree","onSetTicked","onSetClinicalNote"])])),_:1})])),after:(0,l.w5)((()=>[e.showPatientClinicalNoteDetailsFilter()?((0,l.wg)(),(0,l.j4)(d,{key:0,square:"",filled:"",color:"blue-10",label:"Filter Result",class:"q-pa-md",debounce:"500",modelValue:e.filterResult,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filterResult=t)},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(r,{style:{height:"73vh"},visible:!0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.clinical_notes,(t=>((0,l.wg)(),(0,l.iD)("div",{key:`patient_clinical_note_detail-${t.code}`},[e.filtered_patient_clinical_note_details[t.code]&&e.filtered_patient_clinical_note_details[t.code].rows&&e.filtered_patient_clinical_note_details[t.code].rows.length>0&&e.ticked.includes(t.code)?((0,l.wg)(),(0,l.j4)(m,{key:0,class:"shadow-0 q-mx-md q-pb-md"},{default:(0,l.w5)((()=>[void 0===t.categorical_type?((0,l.wg)(),(0,l.j4)(f,{key:0,class:"q-pa-none cursor-pointer",onClick:i=>e.expandNote(t.code)},{default:(0,l.w5)((()=>[(0,l._)("div",Le,[(0,l._)("div",Qe,(0,a.zw)(t.name),1),(0,l._)("div",null,[e.filtered_patient_clinical_note_details[t.code].rows.length>0?((0,l.wg)(),(0,l.iD)("div",Re,[t.allow_multiple?((0,l.wg)(),(0,l.j4)(u,{key:0,icon:"fa fa-plus",flat:"",round:"",color:"blue-10",class:"q-mr-md",onClick:i=>e.openEntryNotes(t)},null,8,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(h,{flat:"",round:"",size:"md",class:"q-pr-md",name:this.filtered_patient_clinical_note_details[t.code].status?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])])):(0,l.kq)("",!0)])])])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(f,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(m,{square:"",class:"shadow-0 cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{square:"",bordered:"",class:"shadow-0 row q-pt-md q-pr-md q-pl-md"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filtered_patient_clinical_note_details[t.code].rows,((i,o)=>((0,l.wg)(),(0,l.iD)("div",{class:"col-12 q-mb-md",key:o},[(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{class:"q-pa-none shadow-0 cursor-pointer",square:"",bordered:"",onClick:t=>e.getRow(i)},{default:(0,l.w5)((()=>[(0,l._)("div",We,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filtered_patient_clinical_note_details[t.code].fields,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"row child",key:t,bordered:""},[(0,l._)("div",$e,(0,a.zw)(e.label),1),(0,l._)("div",Oe,(0,a.zw)(i[e.field]),1)])))),128)),(0,l._)("div",Pe,[(0,l.Wm)(u,{icon:"fa fa-edit",color:"blue-10",flat:"",round:""})])])])),_:2},1032,["onClick"])),[[_,void 0,"grey-5"]])])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1536),[[p.F8,this.filtered_patient_clinical_note_details[t.code].status]])])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),e.filtered_patient_clinical_note_details[t.code]&&e.filtered_patient_clinical_note_details[t.code].rows&&0!==e.filtered_patient_clinical_note_details[t.code].rows.length||!e.ticked.includes(t.code)||void 0!==t.categorical_type?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:1,square:"",flat:"",class:"shadow-0 q-mx-md q-pb-md"},{default:(0,l.w5)((()=>[void 0===t.categorical_type?((0,l.wg)(),(0,l.j4)(f,{key:0,class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l._)("div",Ge,[(0,l._)("div",je,(0,a.zw)(t.name),1)])])),_:2},1024)):(0,l.kq)("",!0),(0,l.Wm)(f,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{square:"",bordered:"",class:"shadow-0"},{default:(0,l.w5)((()=>[(0,l._)("div",Ue,[e.isFiltered?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:0,icon:"fa fa-plus",flat:"",round:"",color:"blue-10",onClick:i=>e.openEntryNotes(t)},null,8,["onClick"])),e.isFiltered?((0,l.wg)(),(0,l.iD)("div",ze,' No rows matching "'+(0,a.zw)(e.filterResult)+'". ',1)):((0,l.wg)(),(0,l.iD)("div",Ae," No Clinical Note for "+(0,a.zw)(t.name)+" yet. ",1))])])),_:2},1024)])),_:2},1024)])),_:2},1024))])))),128))])),_:1})])),_:1},8,["modelValue"])])}function He(e,t,i,a,o,n){const s=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),r=(0,l.up)("q-tree");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:"Filter Clinical Notes"},{append:(0,l.w5)((()=>[""!==e.filter?((0,l.wg)(),(0,l.j4)(s,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):(0,l.kq)("",!0)])),_:1},8,["modelValue"]),(0,l.Wm)(r,{class:"col-2 text-h6 text-weight-light",nodes:e.clinicalNoteTree,"node-key":"code","label-key":"name","tick-strategy":"strict",ticked:e.ticked,"onUpdate:ticked":t[1]||(t[1]=t=>e.ticked=t),"default-expand-all":"",filter:e.filter,expanded:e.ticked,"onUpdate:expanded":t[2]||(t[2]=t=>e.ticked=t)},null,8,["nodes","ticked","filter","expanded"])])}const Ke=(0,l.aZ)({name:"ClinicalNoteTree",props:["clinicalNoteTree"],data(){return{tree:[],ticked:[],filter:null,clinical_notes:[],expanded:[]}},computed:{...(0,de.Se)({clinicalEncounters:"encounters/clinicalEncounters"})},watch:{ticked(e){e.length>0&&this.$emit("setTicked",e)},async clinicalEncounters(e){e.length>0&&this.init(),await this.initiateTree()},clinicalNoteTree(e){this.initiateTree()}},methods:{async initiateTree(){this.expanded=this.clinicalNoteTree,this.ticked=await this.getKeys(this.clinicalNoteTree),this.clinical_notes=await this.getFlatArray(this.clinicalNoteTree),this.$emit("setClinicalNote",this.clinical_notes)},getKeys(e,t=[]){if(!e)throw"Incomplete arguments.";for(const i of e)t.push(i.code),null!=i.children&&i.children.length>0&&this.getKeys(i.children,t);return t},getFlatArray(e,t=[]){if(!e)throw"Incomplete arguments.";for(const i of e){const e=JSON.parse(JSON.stringify(i));delete e.children,t.push(e),null!=i.children&&i.children.length>0&&this.getFlatArray(i.children,t)}return t},resetFilter(){this.filter="",this.$refs.filterRef.focus()},init(){this.$emit("setInit",!0)}}});var Ye=i(5078);const Je=(0,ee.Z)(Ke,[["render",He]]),Xe=Je;se()(Ke,"components",{QInput:Fe.Z,QIcon:Ve.Z,QTree:Ye.Z});const et=(0,l.aZ)({name:"ClinicalNoteHierarchy",props:["clinicalNoteTree"],data(){return{filter:"",filterRef:null,filterResult:"",splitterModel:30,ticked:[],patient_clinical_note_details:{},filtered_patient_clinical_note_details:{},clinicalEncounterListsColors:["bg-grey-1, bg-grey-2"],clinical_notes:[],isFiltered:!1,expanded:[]}},watch:{filterResult(e){if(this.filtered_patient_clinical_note_details=JSON.parse(JSON.stringify(this.patient_clinical_note_details)),""!==e&&null!==e){this.isFiltered=!0;for(const e in this.filtered_patient_clinical_note_details)for(let t=this.filtered_patient_clinical_note_details[e].rows.length-1;t>=0;t--){let i=!1;for(const l in this.filtered_patient_clinical_note_details[e].rows[t])if(this.filtered_patient_clinical_note_details[e].rows[t][l].toLowerCase().includes(this.filterResult.toLowerCase())){i=!0;break}i||this.filtered_patient_clinical_note_details[e].rows.splice(t,1)}}else this.isFiltered=!1}},computed:{...(0,de.Se)({clinicalEncounters:"encounters/clinicalEncounters"})},methods:{setTicked(e){this.ticked=e},setClinicalNote(e){this.clinical_notes=e},expandNote(e){this.filtered_patient_clinical_note_details[e].status=!this.filtered_patient_clinical_note_details[e].status},getPatientClinicalNoteDetails:function(e){const t={};let i=[];for(const l of e){void 0===t[l.clinical_note_code]&&(t[l.clinical_note_code]={clinicalNoteCode:l.clinical_note_code,label:l.clinical_note||"",status:!0,fields:[],rows:[]});for(const e of l.result_format.fields){let i=!1;for(const a of t[l.clinical_note_code].fields)if(a.field===e.code){i=!0;break}i||t[l.clinical_note_code].fields.push({field:e.code,label:e.name,name:e.code,align:"center",sortable:!0})}t[l.clinical_note_code].fields.push({field:"updated_by",label:"Updated By",name:"updated_by",align:"center",sortable:!0},{field:"datetime_updated",label:"Update Date",name:"datetime_updated",align:"center",sortable:!0}),i=t[l.clinical_note_code].fields.filter(((e,t,i)=>t===i.findIndex((t=>t.label===e.label)))),t[l.clinical_note_code].fields=i}for(const l of e)for(const e in t)if(e===l.clinical_note_code){const i={};for(const e of l.result_format.fields)void 0===i[e.code]&&(i[e.code]=e.value),void 0===i["updated_by"]&&(i["updated_by"]=l.user_name),void 0===i["datetime_updated"]&&(i["datetime_updated"]=l.update_datetime),void 0===i["result_format"]&&(i["result_format"]=JSON.stringify(l.result_format)),void 0===i["clinical_encounter_id"]&&(i["clinical_encounter_id"]=l.clinical_encounter_id.toString()),void 0===i["clinical_note_code"]&&(i["clinical_note_code"]=l.clinical_note_code),void 0===i["clinical_note_name"]&&(i["clinical_note_name"]=l.clinical_note);t[e].rows.push(i)}return t},async init(){const e=JSON.parse(JSON.stringify(this.clinicalEncounters));this.patient_clinical_note_details=this.getPatientClinicalNoteDetails(e),this.filtered_patient_clinical_note_details=JSON.parse(JSON.stringify(this.patient_clinical_note_details))},openEntryNotes(e){const t={clinicalNoteCode:e.code};this.$emit("openEntryNotes",t)},getRow(e){this.$emit("setUpdateNote",e)},showPatientClinicalNoteDetailsFilter(){for(const e of this.ticked)for(const t of this.clinical_notes)if(t.code===e&&void 0===t.categorical_type)return!0;return!1}},components:{ClinicalNoteTree:Xe}});var tt=i(218),it=i(2471),lt=i(6489);const at=(0,ee.Z)(et,[["render",Be]]),ot=at;se()(et,"components",{QSplitter:tt.Z,QScrollArea:te.Z,QInput:Fe.Z,QCard:ae.Z,QCardSection:oe.Z,QBtn:ie.Z,QIcon:Ve.Z,QSlideTransition:it.Z,QTable:Me.Z}),se()(et,"directives",{Ripple:lt.Z});const nt=(0,l.aZ)({name:"PatientEncounterInfo",props:["clinicalNoteCategoryTree"],components:{PatientChart:$.Z,TestResult:O.Z,PatientInfo:P.Z,ClinicalNotesDashboard:re,GeneralNoteEntry:Ze,ClinicalNoteHierarchy:ot},data(){return{tab:"generalInfo",bools:{isDialogOpen:!1,isGeneralInfoOpen:!1,generalNoteLoading:!1,generalEntryLoading:!1,enableEntry:!1,noteMode:!1},selectedNote:[],boolean:!0,clinicalNotesLists:[],clinicalEncounterLists:[],clinicalEncounterListsColors:["bg-blue-6","bg-blue-7","bg-blue-8","bg-blue-9","bg-blue-10"],details:{caseNo:null,name:null,birthdate:null,sex:null,patientCategory:null,chiefComplaint:null},clinicalNoteInfo:{currentTitle:null,title:null,name:null,format:null,clinicalNoteCode:null,clinicalCategoryCode:null,clinicalCategoryName:null,clinicalNotes:[]},editNoteInfo:[],encounterInfo:[{label:"Category",field:"category"},{label:"Room",field:"room"},{label:"Unit",field:"unit"},{label:"Ward",field:"ward"},{label:"Admission Date",field:"admitted"},{label:"Discharge Date",field:"discharged"},{label:"Chief Complaint",field:"chiefComplaint"}],generalDataNotes:[],splitterModel:70,splitterModel2:30,columnTable:[],rowTable:[],clinicalNoteTable:[],clinicalNoteTree:[]}},computed:{...(0,de.Se)({encounterCases:"encounters/encounterCases",clinicalEncounters:"encounters/clinicalEncounters",generalNotes:"clinicalNotes/generalNotes",clinicalNotes:"clinicalNotes/clinicalNotes",patientGeneralNotes:"encounters/patientGeneralNotes"}),caseInfo(){return 0==this.encounterCases.length?{}:this.encounterCases.map((e=>({caseno:e.case_no,patientno:e.patient_no,lastname:e.last_name,firstname:e.first_name,middlename:e.middle_name,gender:e.sex,birthdate:e.birthDate,category:e.patient_category,room:e.room,unit:e.room_unit,ward:e.ward,admitted:new Date(e.datetime_admitted).toDateString(),discharged:e.datetime_discharged?new Date(e.datetime_discharged).toDateString():"",chiefComplaint:e.chief_complaint})))[0]}},created(){this.initialize()},methods:{async initialize(){this.generalDataNotes=this.generalNotes,this.clinicalTabLoading=!1},nodeMode(){this.bools.noteMode=!0},setEntryNotes(e){this.bools.generalNoteLoading=!0,this.bools.noteMode=!0,this.setClinicalNotes(e),setTimeout((async()=>{this.bools.generalNoteLoading=!1}),500)},async openGeneralDataDialog(e){this.bools.isGeneralInfoOpen=!0,this.bools.generalNoteLoading=!0,this.clinicalNoteInfo.clinicalCategoryCode=e.code,this.clinicalNoteInfo.clinicalCategoryName=e.name;var t=this.clinicalNoteCategoryTree.filter((t=>t.code===e.code));this.clinicalNoteTree=t,setTimeout((async()=>{console.log(e),this.clinicalNotesLists=e.children,this.fetchGeneralNotes()}),500)},async setClinicalNotes(e){void 0!==e.clinicalNoteCode&&(this.editNoteInfo=[]);const t=void 0===e.clinical_note_code?e.clinicalNoteCode:e.clinical_note_code;var i=this.clinicalNotes.filter((e=>e.code===t));this.setClinicalNoteInfo(i[0],!0),this.fetchGeneralNotes()},async setClinicalNoteInfo(e,t){if(this.clinicalNoteInfo.name=e.name,this.clinicalNoteInfo.clinicalNoteCode=e.code,this.clinicalNoteInfo.format=e.template_format,t){let t=void 0===e.template_format.title?null:e.template_format.title;this.clinicalNoteInfo.title=null===t?e.name:t}else{var i=this.clinicalNotes.filter((t=>t.code===e.code));let t=void 0===i[0].template_format.title?null:i[0].template_format.title;this.clinicalNoteInfo.title=null===t?i[0].name:t}},async fetchGeneralNotes(){let e="";e={patientNo:this.encounterCases[0].patientID,clinicalCategoryCode:this.clinicalNoteInfo.clinicalCategoryCode,checking:!0,byCategoryCode:!0},await this.$store.dispatch("encounters/getClinicalEncounters",e),this.clinicalEncounterLists=this.clinicalEncounters,this.bools.generalNoteLoading=!1},setInit(){this.bools.enableEntry=!1,this.bools.generalNoteLoading=!0,this.editNoteInfo=[],this.bools.noteMode=!1,this.fetchGeneralNotes()},setUpdateNote(e){this.bools.noteMode=!0,this.bools.enableEntry=!0;const t={clinical_note_code:e.clinical_note_code,clinical_note:e.clinical_note_name,result_format:JSON.parse(e.result_format),clinical_encounter_id:parseInt(e.clinical_encounter_id)};this.setPatientNotes(t)},setPatientNotes(e){this.bools.generalEntryLoading=!0,this.bools.generalNoteLoading=!0,setTimeout((()=>{this.editNoteInfo=e;const t={name:e.clinical_note,code:e.clinical_note_code,template_format:e.result_format,title:e.clinical_note};this.setClinicalNoteInfo(t,!1),this.bools.generalEntryLoading=!1,this.bools.generalNoteLoading=!1}),500)},setInitEditFields(){this.editNoteInfo=[],this.clinicalEncounterLists=[],this.bools.enableEntry=!1,this.bools.isGeneralInfoOpen=!1,this.selectedNote=null,this.bools.noteMode=!1,this.clinicalNoteInfo.currentTitle=null,this.clinicalNoteInfo.title=null,this.clinicalNoteInfo.name=null,this.clinicalNoteInfo.format=null,this.clinicalNoteInfo.clinicalNoteCode=null,this.clinicalNoteInfo.clinicalCategoryCode=null,this.clinicalNoteInfo.clinicalCategoryName=null}},watch:{selectedNote(e){null!==e&&this.setClinicalNotes(e)},bools:{async handler(e){e.isGeneralInfoOpen||this.setInitEditFields()},deep:!0}}});var st=i(7547),ct=i(8408),rt=i(5906),dt=i(6602),ut=i(5869),pt=i(8870),ht=i(1070),ft=i(9367);const mt=(0,ee.Z)(nt,[["render",W]]),Nt=mt;se()(nt,"components",{QTabs:st.Z,QTab:ct.Z,QTabPanels:rt.Z,QTabPanel:dt.Z,QCard:ae.Z,QCardSection:oe.Z,QIcon:Ve.Z,QSeparator:ut.Z,QBtn:ie.Z,QTooltip:pt.Z,QDialog:le.Z,QScrollArea:te.Z,QSplitter:tt.Z,QInnerLoading:ke.Z,QSpinnerBall:ht.Z,QCardActions:ft.Z}),se()(nt,"directives",{Ripple:lt.Z});const gt={class:"bg-transparent"},_t={class:"q-ml-md q-pa-md"},bt={key:0},wt={key:0},Ct={key:0},yt={key:1},vt=(0,l._)("br",null,null,-1),It=(0,l._)("div",{class:"q-pt-md text-h5 text-overline"}," PLEASE SELECT A CLINICAL NOTE ",-1);function qt(e,t,i,o,n,s){const c=(0,l.up)("clinical-note-hierarchy"),r=(0,l.up)("GeneralNoteEntry"),d=(0,l.up)("q-spinner-ball"),u=(0,l.up)("q-inner-loading"),p=(0,l.up)("q-icon"),h=(0,l.up)("q-splitter"),f=(0,l.up)("q-card-section"),m=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",gt,[(0,l.Wm)(m,{square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(h,{modelValue:e.splitterModel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitterModel=t)},{before:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(c,{clinicalNoteTree:this.clinicalNoteCat,clinicalEncounters:this.clinicalEncounters,onOpenEntryNotes:e.setEntryNotes,onSetUpdateNote:e.setUpdateNote},null,8,["clinicalNoteTree","clinicalEncounters","onOpenEntryNotes","onSetUpdateNote"])])])),after:(0,l.w5)((()=>[(0,l._)("div",_t,[(0,l._)("div",{style:{height:"80vh"},class:(0,a.C_)([[this.bools.noteMode?"":"flex flex-center"],"text-center"])},[this.bools.noteMode?((0,l.wg)(),(0,l.iD)("div",bt,[this.bools.generalNoteLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",wt,[null!==this.clinicalNoteInfo.format?((0,l.wg)(),(0,l.iD)("div",Ct,[e.bools.generalEntryLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:0,clinicalNoteInfo:this.clinicalNoteInfo,editNoteInfo:this.editNoteInfo,onCheckGeneralNotes:t[0]||(t[0]=t=>e.fetchGeneralNotes()),onSetClinicalNoteFormat:t[1]||(t[1]=t=>e.setClinicalNotes(this.clinicalNoteInfo)),onGoBackToSelection:t[2]||(t[2]=t=>e.setInit())},null,8,["clinicalNoteInfo","editNoteInfo"]))])):(0,l.kq)("",!0)])),(0,l.Wm)(u,{showing:e.bools.generalNoteLoading},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{size:"50px",color:"primary"})])),_:1},8,["showing"])])):((0,l.wg)(),(0,l.iD)("div",yt,[(0,l.Wm)(p,{name:"fa fa-exclamation-circle",size:"xl"}),vt,It]))],2)])])),_:1},8,["modelValue"])])])),_:1})])),_:1})])])}const Dt=(0,l.aZ)({name:"ClinicalNoteFields",props:["panel"],computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails",clinicalNoteDetailValues:"clinicalNotes/clinicalNoteDetailValues",clinicalNoteTemplateFormat:"clinicalNotes/clinicalNoteTemplateFormat",encounterCases:"encounters/encounterCases",templateDetails:"clinicalNotes/templateDetails"})},components:{Date:Ne.Z,Text:ge.Z,Number:_e.Z,Textarea:be.Z,Select:we.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:ve.Z},data(){return{clinicalInputFields:[],value:[],drowdownOptions:[],options:[],dropdownLoading:!1}},created(){this.addClinicalNoteDetails()},methods:{setClinicalInputFields(){this.clinicalInputFields=this.clinicalNoteDetails},addClinicalNoteDetails(){console.log(this.clinicalNoteDetails),this.clinicalInputFields.push(this.clinicalNoteDetails)},filterDropdown(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.drowdownOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.drowdownOptions})},async getClinicalNoteDetailValues(e){this.dropdownLoading=!0,await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetailValues",e);var t=[];for(var i of this.clinicalNoteDetailValues)t.push(i.Value);this.drowdownOptions=t,this.dropdownLoading=!1},async saveClinicalNoteEncounter(){const e={caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/saveClinicalEncounter",e);if(!t[0].ERR){for(var i of this.$refs.clinicalNoteValue){const e={clinicalFieldCode:i.opts.clinicalFieldCode,clinicalNoteValue:i.value,clinicalEncounterID:t[0].ENCOUNTERID},l=await this.$store.dispatch("encounters/saveClinicalEncounterDetails",e);if(l[0].ERR)return this.showNotif("error",`Error saving ${l}`),!1}this.showNotif("success","Clinical Note Saved"),this.$emit("getClinicalNotes",!0)}},showNotif(e,t){let i="";i="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:i})}}});var kt=i(3944),Et=i(6915),xt=i(3017),Tt=i(3414),Zt=i(2035),St=i(677);se()(Dt,"components",{QCard:ae.Z,QInput:Fe.Z,QIcon:Ve.Z,QPopupProxy:kt.Z,QDate:Et.Z,QBtn:ie.Z,QSelect:xt.Z,QItem:Tt.Z,QItemSection:Zt.Z,QSeparator:ut.Z,QScrollArea:te.Z}),se()(Dt,"directives",{ClosePopup:St.Z});const Mt={class:"row q-col-gutter-md justify-between"},Ft={class:"col-auto"},Vt=(0,l._)("div",{class:"col-auto text-uppercase text-xs"},"Created By",-1),Lt={class:"col text-md text-uppercase"},Qt={class:"col-auto"},Rt=(0,l._)("div",{class:"col-auto text-uppercase text-xs"},"SAVE DATE",-1),Wt={class:"col text-md text-uppercase"};function $t(e,t,i,o,n,s){const c=(0,l.up)("q-card-section"),r=(0,l.up)("Date"),d=(0,l.up)("Text"),u=(0,l.up)("Number"),p=(0,l.up)("Textarea"),h=(0,l.up)("Select"),f=(0,l.up)("ICD10"),m=(0,l.up)("NumberRange"),N=(0,l.up)("DateRange"),g=(0,l.up)("q-scroll-area"),_=(0,l.up)("q-btn"),b=(0,l.up)("q-btn-group"),w=(0,l.up)("q-card-actions"),C=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(C,{square:"",class:"q-pa-0 q-ma-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-10 text-white fixed-top"},{default:(0,l.w5)((()=>[(0,l._)("div",Mt,[(0,l._)("div",Ft,[Vt,(0,l._)("div",Lt,(0,a.zw)(e.selectedClinicalNote.user_name)+" - "+(0,a.zw)(e.selectedClinicalNote.role),1)]),(0,l._)("div",Qt,[Rt,(0,l._)("div",Wt,(0,a.zw)(e.selectedClinicalNote.formattedUpdateDatetime),1)])])])),_:1}),(0,l.Wm)(g,{class:"fit"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"q-mt-xl q-mb-xl"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.resultFormat,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"q-ma-md"},["date"==e.opts.type?((0,l.wg)(),(0,l.j4)(r,{key:0,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==e.opts.type?((0,l.wg)(),(0,l.j4)(d,{key:1,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==e.opts.type?((0,l.wg)(),(0,l.j4)(u,{key:2,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==e.opts.type?((0,l.wg)(),(0,l.j4)(p,{key:3,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"select"==e.opts.type?((0,l.wg)(),(0,l.j4)(h,{key:4,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,options:e.opts.options,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==e.opts.type?((0,l.wg)(),(0,l.j4)(f,{key:5,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,value:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==e.opts.type?((0,l.wg)(),(0,l.j4)(m,{key:6,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==e.opts.type?((0,l.wg)(),(0,l.j4)(N,{key:7,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,l.kq)("",!0)])))),128))])),_:1})])),_:1}),(0,l.Wm)(w,{align:"right",class:"q-pa-md bg-blue-10 text-white fixed-bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[this.disableInput?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:0,onClick:t[0]||(t[0]=t=>e.updateClinicalNote()),label:"Update",icon:"fa fa-save",color:"green"})),(0,l.Wm)(_,{onClick:t[1]||(t[1]=t=>e.closeDialog()),label:"Close",icon:"fa fa-times",color:"red"})])),_:1})])),_:1})])),_:1})}const Ot=(0,l.aZ)({name:"ClinicalNoteDetails",props:["selectedClinicalNote"],data(){return{resultFormat:[],disableInput:!1}},components:{Date:Ne.Z,Text:ge.Z,Number:_e.Z,Textarea:be.Z,Select:we.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:ve.Z},computed:{...(0,de.Se)({clinicalEncounters:"encounters/clinicalEncounters",userCredentials:"user/credentials",encounterCases:"encounters/encounterCases",clinicalEncounterDetails:"encounters/clinicalEncounterDetails"})},created(){this.formatResult()},methods:{formatResult(){this.resultFormat=this.selectedClinicalNote.result_format.fields,this.selectedClinicalNote.user_id!==this.userCredentials.userID&&(this.disableInput=!0)},async updateClinicalNote(){const e={clinicalEncounterID:this.selectedClinicalNote.clinical_encounter_id,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.selectedClinicalNote.clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/updateClinicalEncounter",e);if(!t[0].ERR){for(var i of this.$refs.clinicalNoteValue){var l=this.clinicalEncounterDetails.filter((e=>e.clinical_field_code===i.opts.clinicalFieldCode));const e={clinicalEncounterDetailID:l[0].id,clinicalFieldValue:i.value},t=await this.$store.dispatch("encounters/updateClinicalEncounterDetails",e);if(t[0].ERR)return this.showNotif("error",`Error saving ${t}`),!1}this.showNotif("success","Clinical Note Details Updated"),this.closeDialog()}},closeDialog(){this.$emit("closeDialog",!0)},showNotif(e,t){let i="";i="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:i})}}}),Pt=(0,ee.Z)(Ot,[["render",$t]]),Gt=Pt;se()(Ot,"components",{QCard:ae.Z,QCardSection:oe.Z,QScrollArea:te.Z,QCardActions:ft.Z,QBtnGroup:xe.Z,QBtn:ie.Z});const jt=(0,l.aZ)({name:"OtherClinicalNotes",props:["clinicalNoteDetails","clinicalEncounters"],data(){return{selectedClinicalNote:[],clinicalNoteDialogDetails:!1}},watch:{clinicalNoteDialogDetails(e){e||(this.selectedClinicalNote=[],this.$emit("getClinicalNotes",!0))}},methods:{async showClinicalNoteDetails(e){this.selectedClinicalNote=e,this.clinicalNoteDialogDetails=!0;const t={clinicalEncounterID:e.clinical_encounter_id};console.log(e),await this.$store.dispatch("encounters/getClinicalEncounterDetails",t)}},components:{ClinicalNoteDetails:Gt}});se()(jt,"components",{QCard:ae.Z,QSeparator:ut.Z,QScrollArea:te.Z,QDialog:le.Z}),se()(jt,"directives",{Ripple:lt.Z});const Ut=(0,l.aZ)({name:"MainEMR",props:["clinicalNoteCategories","clinicalNoteCategoryTree"],data(){return{tab:"clinicalNotes",bools:{showInputFields:!1,loadTree:!1,isDialogOpen:!1,isGeneralInfoOpen:!1,generalNoteLoading:!1,generalEntryLoading:!1,enableEntry:!1,noteMode:!1},splitterModel:70,splitterMobileModel:25,mobileTabShow:!1,clinicalTabs:"",search:"",selectionMenu:!1,clinicalNoteCat:[],clinicalNoteHistory:[],clinicalTabLoading:!1,selected:"",filter:"",filterRef:null,clinicalNoteInfo:{currentTitle:null,title:null,name:null,format:null,clinicalNoteCode:null,clinicalCategoryCode:null,clinicalCategoryName:null,clinicalNotes:[]},editNoteInfo:[]}},computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncounters:"encounters/clinicalEncounters",userRole:"helpers/userRole",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows",encounterCases:"encounters/encounterCases",clinicalCategoryNotes:"clinicalNotes/clinicalCategoryNotes",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails"})},watch:{clinicalNoteCategoryTree(e){this.clinicalNoteCat=this.clinicalNoteCategoryTree},selected(e){console.log(e)},clinicalCategoryNotes(e){this.clinicalNoteCat=e},async clinicalTabs(e){await this.getClinicalNotes(e)},clinicalNoteCat(e){e.length>0&&(this.clinicalTabs=e[0].categoryCode)},tab(e){this.showClinicalDetails(e),this.checkCase()}},async created(){await this.formatClinicalNoteCategoryTree(),await this.fetchGeneralNotes()},methods:{async formatClinicalNoteCategoryTree(){this.bools.loadTree=!0,setTimeout((()=>{this.clinicalNoteCat=this.clinicalNoteCategoryTree,this.bools.loadTree=!1}),1500)},setUpdateNote(e){this.bools.noteMode=!0,this.bools.enableEntry=!0;const t={clinical_note_code:e.clinical_note_code,clinical_note:e.clinical_note_name,result_format:JSON.parse(e.result_format),clinical_encounter_id:parseInt(e.clinical_encounter_id)};this.setPatientNotes(t)},setPatientNotes(e){this.bools.generalEntryLoading=!0,this.bools.generalNoteLoading=!0,setTimeout((()=>{this.editNoteInfo=e;const t={name:e.clinical_note,code:e.clinical_note_code,template_format:e.result_format,title:e.clinical_note};this.setClinicalNoteInfo(t,!1),this.bools.generalEntryLoading=!1,this.bools.generalNoteLoading=!1}),500)},setInit(){this.bools.enableEntry=!1,this.bools.generalNoteLoading=!0,this.editNoteInfo=[],this.bools.noteMode=!1,this.fetchGeneralNotes()},setInitEditFields(){this.editNoteInfo=[],this.clinicalEncounterLists=[],this.bools.enableEntry=!1,this.bools.isGeneralInfoOpen=!1,this.selectedNote=null,this.bools.noteMode=!1,this.clinicalNoteInfo.currentTitle=null,this.clinicalNoteInfo.title=null,this.clinicalNoteInfo.name=null,this.clinicalNoteInfo.format=null,this.clinicalNoteInfo.clinicalNoteCode=null,this.clinicalNoteInfo.clinicalCategoryCode=null,this.clinicalNoteInfo.clinicalCategoryName=null},setEntryNotes(e){this.bools.generalNoteLoading=!0,this.bools.noteMode=!0,this.setClinicalNotes(e),setTimeout((async()=>{this.bools.generalNoteLoading=!1}),500)},async setClinicalNotes(e){void 0!==e.clinicalNoteCode&&(this.editNoteInfo=[]);const t=void 0===e.clinical_note_code?e.clinicalNoteCode:e.clinical_note_code;var i=this.clinicalNotes.filter((e=>e.code===t));this.setClinicalNoteInfo(i[0],!0),this.fetchGeneralNotes()},async setClinicalNoteInfo(e,t){if(this.clinicalNoteInfo.name=e.name,this.clinicalNoteInfo.clinicalNoteCode=e.code,this.clinicalNoteInfo.format=e.template_format,t){let t=void 0===e.template_format.title?null:e.template_format.title;this.clinicalNoteInfo.title=null===t?e.name:t}else{var i=this.clinicalNotes.filter((t=>t.code===e.code));let t=void 0===i[0].template_format.title?null:i[0].template_format.title;this.clinicalNoteInfo.title=null===t?i[0].name:t}},async fetchGeneralNotes(){let e="";e={patientNo:this.encounterCases[0].patientID,clinicalCategoryCode:null,checking:!0,byCategoryCode:!1},await this.$store.dispatch("encounters/getClinicalEncounters",e),this.clinicalEncounterLists=this.clinicalEncounters,this.bools.generalNoteLoading=!1},async showClinicalDetails(e){var t="";for(var i of this.clinicalCategoryNotes){const l=i.children.filter((t=>t.label===e));if(void 0!==l[0]){const e={name:l[0].label,code:l[0].clinical_note_code,categoryCode:l[0].clinical_category,details:l[0]};t=e}else{const t=this.clinicalNoteCategories.filter((t=>t.label===e));t}}console.log(t),""!==t&&(await this.getClinicalNoteDetails(t.code),this.clinicalNoteDetails.length>0&&(this.bools.showInputFields=!0))},async scrollToTop(){this.$refs.scrollArea.setScrollPosition("vertical",1),await this.$store.dispatch("helpers/setInfiniteScroll",!0),await this.checkCase()},async selectSubgroup(){const e=!this.selectionMenu;this.selectionMenu=e},filterCN(e){const t=e.toUpperCase();var i=this.clinicalNoteCategories.filter((e=>e.filterName.includes(t)));this.clinicalNoteCat=i,0===i.length&&(this.clinicalTabs=[])},async fetchClinicalNotesCategories(){await this.$store.dispatch("clinicalNotes/fetchClinicalCategories"),this.clinicalNoteCat=this.clinicalNoteCategories},async getClinicalNotes(e){this.loadingTabs=!0;const t={sectionType:"ehr"};await this.$store.dispatch("clinicalNotes/fetchClinicalNotes",t),this.loadingTabs=!1},async checkCase(){this.clinicalTabLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted};await this.$store.dispatch("encounters/getCases",t);const i={caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,patientNo:this.encounterCases[0].patient_no,clinicalNotecode:this.clinicalNoteDetails[0].clinical_note_code};await this.$store.dispatch("encounters/getClinicalEncounters",i);var l=this.clinicalEncounters.filter((e=>e.clinical_note_category_id===this.clinicalTabs));this.clinicalNoteHistory=l,this.clinicalTabLoading=!1},async getClinicalNoteDetails(e){console.log(e,"clinicalNoteCode"),await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetails",e)}},components:{ClinicalNoteHierarchy:ot,GeneralNoteEntry:Ze}});var At=i(4103);const zt=(0,ee.Z)(Ut,[["render",qt]]),Bt=zt;se()(Ut,"components",{QCard:ae.Z,QCardSection:oe.Z,QSplitter:tt.Z,QSkeleton:At.ZP,QTabs:st.Z,QTab:ct.Z,QSeparator:ut.Z,QTabPanels:rt.Z,QTabPanel:dt.Z,QInnerLoading:ke.Z,QSpinnerBall:ht.Z,QIcon:Ve.Z});const Ht=(0,l.aZ)({name:"EMR",components:{PatientEncounterInfo:Nt,MainEMR:Bt},data(){return{bools:{isMultipleCaseNo:!0,isLoading:!1},clinicalNoteCategoryTree:[]}},computed:{...(0,de.Se)({visitEncounterNotes:"clinicalNotes/visitEncounterNotes",admissionEncounterNotes:"clinicalNotes/admissionEncounterNotes",generalNotes:"clinicalNotes/generalNotes",rightDrawer:"helpers/drawerRight",colorEMR:"helpers/colorEMR",clinicalNoteCategories:"clinicalNotes/clinicalNoteCategories",showClinicalNoteDetails:"helpers/showClinicalNoteDetails",userRole:"helpers/userRole",encounterCases:"encounters/encounterCases",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows"})},mounted(){this.mountFunctions()},methods:{async mountFunctions(){await this.checkCase(),await this.fetchNotesCategories(),await this.checkPatientType()},async fetchNotesCategories(){const e={sectionID:"ehr"};await this.$store.dispatch("clinicalNotes/fetchClinicalCategoryNotes",e),await this.$store.dispatch("clinicalNotes/fetchClinicalNoteCategoryTree")},checkPatientType(){"I"===this.encounterCases[0].patient_type?this.clinicalNoteCategoryTree=this.admissionEncounterNotes:this.clinicalNoteCategoryTree=this.visitEncounterNotes},async checkCase(){this.bools.isLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,paginated:1};await this.$store.dispatch("encounters/getCases",t),"emr-checked"===this.$route.name&&(this.bools.isMultipleCaseNo=!1),1===this.encounterCases.length&&(this.bools.isMultipleCaseNo=!1),this.bools.isLoading=!1},async caseRoute(e){const t=await this.$store.dispatch("helpers/encrypt",e);this.$router.push(`/emr/case/${t.encrypted}/checked`)}}});var Kt=i(4379),Yt=i(4752);const Jt=(0,ee.Z)(Ht,[["render",u]]),Xt=Jt;se()(Ht,"components",{QPage:Kt.Z,QSpinnerBars:Yt.Z,QBtn:ie.Z})}}]);
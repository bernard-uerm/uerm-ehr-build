"use strict";(self["webpackChunkuerm_ehr"]=self["webpackChunkuerm_ehr"]||[]).push([[167],{4167:(e,t,l)=>{l.r(t),l.d(t,{default:()=>cl});var i=l(3673),a=l(2323);const o={key:0,class:"flex flex-center"},s={key:1},n={key:0},c={key:1,class:"row justify-center"},r=(0,i._)("div",{class:"col-12 text-center text-weight-light text-h5"}," MULTIPLE CASE NUMBER DETECTED, PLEASE SELECT THE APPROPRIATE CASE ",-1),d=[r];function u(e,t,l,r,u,p){const h=(0,i.up)("PatientEncounterInfo"),f=(0,i.up)("MainEMR"),m=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(m,{class:(0,a.C_)({"flex flex-center":e.bools.isMultipleCaseNo})},{default:(0,i.w5)((()=>[this.bools.isLoading?((0,i.wg)(),(0,i.iD)("div",o)):((0,i.wg)(),(0,i.iD)("div",s,[e.bools.isMultipleCaseNo?((0,i.wg)(),(0,i.iD)("div",c,d)):((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(h,{encounterCases:this.encounterCases,clinicalNoteCategoryTree:this.generalNotes},null,8,["encounterCases","clinicalNoteCategoryTree"]),(0,i.Wm)(f,{clinicalNoteCategories:e.clinicalNoteCategories,clinicalNoteCategoryTree:e.clinicalNoteCategoryTree},null,8,["clinicalNoteCategories","clinicalNoteCategoryTree"])]))]))])),_:1},8,["class"])}var p=l(8880);const h={class:"row q-col-gutter-md justify-center items-center"},f=(0,i._)("br",null,null,-1),m=(0,i.Uk)(" OTHER INFORMATION "),g={class:"q-px-lg relative-position"},N={class:"absolute-top-right q-pt-lg q-pr-md"},_=(0,i.Uk)("View Patient Dashboard"),w={class:"text-weight-light text-h5 row q-gutter-md q-py-md"},b={class:"col-auto column"},C=(0,i._)("div",{class:"text-xs text-weight-medium"},"PATIENT NAME",-1),y={class:"col-auto column"},q=(0,i._)("div",{class:"text-xs text-weight-medium"},"CASE NO",-1),v={class:"text-weight-light text-h5 row q-gutter-md q-py-sm"},D={class:"col-auto text-uppercase text-xs text-weight-medium"},I={class:"col text-md"},k={class:"fit row wrap justify-between items-start content-start q-px-md"},x={class:"text-uppercase"},E={class:"q-ml-md q-pa-md"},Z={key:0},T={key:0},V={key:0},M={key:1},F=(0,i._)("br",null,null,-1),W=(0,i._)("div",{class:"q-pt-md text-h5 text-overline"}," PLEASE SELECT A CLINICAL NOTE ",-1),S={class:"row q-mt-md"},R={class:"col-md-9 q-px-sm"},Q={class:"col-md-3 q-px-sm"};function $(e,t,l,o,s,n){const c=(0,i.up)("q-tab"),r=(0,i.up)("q-tabs"),d=(0,i.up)("q-icon"),u=(0,i.up)("q-card-section"),$=(0,i.up)("q-card"),L=(0,i.up)("q-tab-panel"),j=(0,i.up)("q-tab-panels"),O=(0,i.up)("q-separator"),U=(0,i.up)("q-tooltip"),P=(0,i.up)("q-btn"),A=(0,i.up)("clinical-note-hierarchy"),G=(0,i.up)("GeneralNoteEntry"),z=(0,i.up)("q-spinner-ball"),H=(0,i.up)("q-inner-loading"),B=(0,i.up)("q-splitter"),K=(0,i.up)("q-scroll-area"),Y=(0,i.up)("q-dialog"),J=(0,i.up)("ClinicalNotesDashboard"),X=(0,i.up)("PatientChart"),ee=(0,i.up)("TestResult"),te=(0,i.up)("PatientInfo"),le=(0,i.up)("q-card-actions"),ie=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),class:"text-primary bg-blue-grey-2","outside-arrows":"","mobile-arrows":"","indicator-color":"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"generalInfo",label:"GENERAL MEDICAL NOTES"}),(0,i.Wm)(c,{name:"otherInfo",label:"OTHER INFO"})])),_:1},8,["modelValue"]),(0,i.Wm)(j,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:"",class:""},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{name:"generalInfo"},{default:(0,i.w5)((()=>[(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.generalNotes,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.label},[(0,i.wy)(((0,i.wg)(),(0,i.j4)($,{class:"cursor-pointer bg-blue-10 text-white shadow-0",borderless:"",onClick:l=>e.openGeneralDataDialog(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{align:"center",class:"q-px-md q-py-sm text-overline text-uppercase"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:t.icon,size:"sm"},null,8,["name"]),f,(0,i.Uk)(" "+(0,a.zw)(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[ie]])])))),128))])])),_:1}),(0,i.Wm)(L,{name:"otherInfo"},{default:(0,i.w5)((()=>[m])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(O,{color:"blue-7",size:"2px"}),(0,i._)("div",g,[(0,i._)("div",N,[(0,i.Wm)(P,{onClick:t[2]||(t[2]=(0,p.iM)((t=>e.bools.isDialogOpen=!0),["prevent"])),rounded:"",icon:"fas fa-procedures",flat:"",color:"primary",label:"Patient Dashboard"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[_])),_:1})])),_:1})]),(0,i._)("div",w,[(0,i._)("div",b,[C,(0,i._)("div",null,(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)]),(0,i._)("div",y,[q,(0,i._)("div",null,(0,a.zw)(e.caseInfo.caseno),1)])]),(0,i.Wm)(O),(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.encounterInfo,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-auto column",key:t.label},[(0,i._)("div",D,(0,a.zw)(t.label),1),(0,i._)("div",I,(0,a.zw)(e.caseInfo[t.field]),1)])))),128))])]),(0,i.Wm)(Y,{modelValue:e.bools.isGeneralInfoOpen,"onUpdate:modelValue":t[8]||(t[8]=t=>e.bools.isGeneralInfoOpen=t),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)($,{class:"q-ma-md",style:{height:"100vh","max-width":"100vw"},square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-h5 text-weight-light bg-blue-10 text-white"},{default:(0,i.w5)((()=>[(0,i._)("div",k,[(0,i._)("div",x,(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`)+" - "+(0,a.zw)(this.clinicalNoteInfo.clinicalCategoryName),1),(0,i.Wm)(P,{color:"negative",label:"Close",onClick:t[3]||(t[3]=(0,p.iM)((t=>e.bools.isGeneralInfoOpen=!1),["prevent"])),icon:"fas fa-times"})])])),_:1}),(0,i.Wm)(K,{class:"q-pa-md",style:{height:"87.5vh",width:"93vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(B,{modelValue:e.splitterModel,"onUpdate:modelValue":t[7]||(t[7]=t=>e.splitterModel=t)},{before:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(A,{clinicalNoteTree:this.clinicalNoteTree,clinicalEncounters:this.clinicalEncounters,onOpenEntryNotes:e.setEntryNotes,onSetUpdateNote:e.setUpdateNote},null,8,["clinicalNoteTree","clinicalEncounters","onOpenEntryNotes","onSetUpdateNote"])])])),after:(0,i.w5)((()=>[(0,i._)("div",E,[(0,i._)("div",{style:{height:"80vh"},class:(0,a.C_)([[this.bools.noteMode?"":"flex flex-center"],"text-center"])},[this.bools.noteMode?((0,i.wg)(),(0,i.iD)("div",Z,[this.bools.generalNoteLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",T,[null!==this.clinicalNoteInfo.format?((0,i.wg)(),(0,i.iD)("div",V,[e.bools.generalEntryLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(G,{key:0,clinicalNoteInfo:this.clinicalNoteInfo,editNoteInfo:this.editNoteInfo,onCheckGeneralNotes:t[4]||(t[4]=t=>e.fetchGeneralNotes()),onSetClinicalNoteFormat:t[5]||(t[5]=t=>e.setClinicalNotes(this.clinicalNoteInfo)),onGoBackToSelection:t[6]||(t[6]=t=>e.setInit())},null,8,["clinicalNoteInfo","editNoteInfo"]))])):(0,i.kq)("",!0)])),(0,i.Wm)(H,{showing:e.bools.generalNoteLoading},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{size:"50px",color:"primary"})])),_:1},8,["showing"])])):((0,i.wg)(),(0,i.iD)("div",M,[(0,i.Wm)(d,{name:"fa fa-exclamation-circle",size:"xl"}),F,W]))],2)])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(Y,{"full-height":"","full-width":"",persistent:"",modelValue:e.bools.isDialogOpen,"onUpdate:modelValue":t[10]||(t[10]=t=>e.bools.isDialogOpen=t)},{default:(0,i.w5)((()=>[(0,i.Wm)($,{class:"column"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"col-auto text-h6 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Patient Dashboard: "+(0,a.zw)(`${e.caseInfo.lastname}, ${e.caseInfo.firstname} ${e.caseInfo.middlename}`),1)])),_:1}),(0,i.Wm)(u,{class:"col",style:{overflow:"auto"}},{default:(0,i.w5)((()=>[(0,i._)("div",S,[(0,i._)("div",R,[(0,i.Wm)(J,{currentClinicalNotes:this.clinicalEncounterLists},null,8,["currentClinicalNotes"]),(0,i.Wm)(X,{patientno:e.caseInfo.patientno},null,8,["patientno"]),(0,i.Wm)(ee,{patientno:e.caseInfo.patientno},null,8,["patientno"])]),(0,i._)("div",Q,[(0,i.Wm)(te,{patientno:e.caseInfo.patientno},null,8,["patientno"])])])])),_:1}),(0,i.Wm)(le,{align:"right",class:"col-auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{color:"negative",label:"Close",flat:"",onClick:t[9]||(t[9]=(0,p.iM)((t=>e.bools.isDialogOpen=!1),["prevent"])),icon:"fas fa-times"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var L=l(303),j=l(7198),O=l(250);const U={class:"row"},P={key:0,class:"bg-red-2 q-pa-md"},A={class:"row justify-between items-center"},G={class:"column"},z=(0,i._)("div",{class:"text-xs"},"RESULT DATE",-1),H={class:"absolute-top-right"},B={class:"row justify-between"},K={class:"text-uppercase"};function Y(e,t,l,o,s,n){const c=(0,i.up)("Heading"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-scroll-area"),u=(0,i.up)("q-card-section"),p=(0,i.up)("q-card"),h=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{text:"Clinical Notes"}),(0,i.Wm)(d,{style:{height:"110px"},visible:""},{default:(0,i.w5)((()=>[(0,i._)("div",U,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.currentClinicalNotes,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-auto",key:t},[(0,i.Wm)(r,{label:t.clinical_note+" - "+t.user_name.toUpperCase()+" - "+new Date(t.update_datetime).toDateString().substring(4,15),flat:"",rounded:"",icon:"fas fa-eye",color:"primary",onClick:l=>e.openClinicalNoteDialog(t)},null,8,["label","onClick"])])))),128))]),0!=e.currentClinicalNotes.length||e.bools.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",P," No result Available "))])),_:1}),this.clinicalNoteResult.length>0?((0,i.wg)(),(0,i.j4)(h,{key:0,modelValue:this.bools.clinicalNoteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>this.bools.clinicalNoteDialog=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{square:"",style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i._)("div",A,[(0,i._)("div",null,(0,a.zw)(this.clinicalNoteCardDetails.title),1),(0,i._)("div",G,[z,(0,i._)("div",null,(0,a.zw)(new Date(this.clinicalNoteCardDetails.datetime).toDateString().substring(4,15)),1)])]),(0,i._)("div",H,[(0,i.Wm)(r,{flat:"",round:"",icon:"fa fa-times",onClick:t[0]||(t[0]=t=>e.bools.clinicalNoteDialog=!1),color:"negative"})])])),_:1}),(0,i.Wm)(u,{style:{height:"540px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"fit",visible:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalNoteResult,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"q-pb-md",key:e.label},[(0,i.Wm)(c,{text:e.opts.label},null,8,["text"]),(0,i.Wm)(p,{class:"shadow-0 q-pa-md"},{default:(0,i.w5)((()=>[(0,i._)("div",null,(0,a.zw)(e.value),1)])),_:2},1024)])))),128))])),_:1})])),_:1}),(0,i.Wm)(u,{class:"text-h5 text-weight-light bg-dark text-white"},{default:(0,i.w5)((()=>[(0,i._)("div",B,[(0,i._)("div",K,(0,a.zw)(this.clinicalNoteCardDetails.user),1)])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)])}var J=l(4019);const X=(0,i.aZ)({name:"ClinicalNoteDashboard",props:["currentClinicalNotes"],components:{Heading:J.Z},data(){return{bools:{isLoading:!1,clinicalNoteDialog:!1},clinicalNoteResult:[],clinicalNoteCardDetails:{title:"",user:"",datetime:""}}},methods:{openClinicalNoteDialog(e){this.clinicalNoteCardDetails.title=e.clinical_note,this.clinicalNoteCardDetails.user=e.user_name,this.clinicalNoteCardDetails.datetime=e.formattedUpdateDatetime,this.clinicalNoteResult=e.result_format.fields,this.bools.clinicalNoteDialog=!0}}});var ee=l(4260),te=l(7704),le=l(2165),ie=l(6778),ae=l(151),oe=l(5589),se=l(7518),ne=l.n(se);const ce=(0,ee.Z)(X,[["render",Y]]),re=ce;ne()(X,"components",{QScrollArea:te.Z,QBtn:le.Z,QDialog:ie.Z,QCard:ae.Z,QCardSection:oe.Z});var de=l(3617);const ue={key:0},pe={key:1,style:{height:"929px"}},he={class:"row justify-between"},fe=(0,i._)("div",null,null,-1);function me(e,t,l,a,o,s){const n=(0,i.up)("Date"),c=(0,i.up)("Text"),r=(0,i.up)("Number"),d=(0,i.up)("Textarea"),u=(0,i.up)("Select"),h=(0,i.up)("ICD10"),f=(0,i.up)("NumberRange"),m=(0,i.up)("DateRange"),g=(0,i.up)("q-card-section"),N=(0,i.up)("q-card"),_=(0,i.up)("q-scroll-area"),w=(0,i.up)("q-spinner-gears"),b=(0,i.up)("q-inner-loading"),C=(0,i.up)("q-btn"),y=(0,i.up)("q-btn-group"),q=(0,i.up)("q-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(q,{onSubmit:e.confirmSaveGeneralData},{default:(0,i.w5)((()=>[(0,i._)("div",null,[e.bools.generalNoteLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(_,{key:0,style:{height:"70vh"},ref:"scrollArea",visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalInputFields,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l},[(0,i.Wm)(N,{borderless:"",class:"shadow-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{class:"q-pa-none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a,class:"q-pb-md"},[t.active?((0,i.wg)(),(0,i.iD)("div",ue,["date"==t.type?((0,i.wg)(),(0,i.j4)(n,{key:0,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==t.type?((0,i.wg)(),(0,i.j4)(c,{key:1,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==t.type?((0,i.wg)(),(0,i.j4)(r,{key:2,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==t.type?((0,i.wg)(),(0,i.j4)(d,{key:3,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue",onKeydown:(0,p.D2)((0,p.iM)(e.confirmSaveGeneralData,["shift","exact","prevent"]),["enter"])},null,8,["opts","onKeydown"])):"select"==t.type?((0,i.wg)(),(0,i.j4)(u,{key:4,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,options:t.options,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==t.type?((0,i.wg)(),(0,i.j4)(h,{key:5,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==t.type?((0,i.wg)(),(0,i.j4)(f,{key:6,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==t.type?((0,i.wg)(),(0,i.j4)(m,{key:7,opts:{label:t.name,requiredMessage:t.requiredMessage,required:t.required,type:t.type,clinicalFieldCode:t.code,currentValue:t.value,withValue:!0,index:l,id:t.id},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])))),128))])),_:2},1024)])),_:2},1024)])))),128))])),_:1},512)),e.bools.generalNoteLoading?((0,i.wg)(),(0,i.iD)("div",pe)):(0,i.kq)("",!0),(0,i.Wm)(b,{showing:e.bools.generalNoteLoading},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{size:"50px",color:"primary"})])),_:1},8,["showing"]),(0,i.Wm)(N,{class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i._)("div",he,[fe,(0,i._)("div",null,[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[this.bools.updateMode?((0,i.wg)(),(0,i.j4)(C,{key:1,color:"blue-10",push:"",label:`Update ${this.clinicalNoteInfo.name}`,icon:"fa fa-edit",onClick:e.updateGeneralData,disable:e.bools.disableInput},null,8,["label","onClick","disable"])):((0,i.wg)(),(0,i.j4)(C,{key:0,type:"submit",color:"blue-10",push:"",label:`Save ${this.clinicalNoteInfo.name}`,icon:"fa fa-save",disable:e.bools.disableInput},null,8,["label","disable"]))])),_:1})])])])),_:1})])])),_:1},8,["onSubmit"])])}l(71),l(2100);var ge=l(9172),Ne=l(6397),_e=l(5617),we=l(7050),be=l(1314),Ce=l(1550),ye=l(5191),qe=l(877);const ve=(0,i.aZ)({name:"GeneralDataDialog",props:["clinicalNoteInfo","editNoteInfo"],computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails",clinicalNoteDetailValues:"clinicalNotes/clinicalNoteDetailValues",clinicalNoteTemplateFormat:"clinicalNotes/clinicalNoteTemplateFormat",encounterCases:"encounters/encounterCases",templateDetails:"clinicalNotes/templateDetails"})},components:{Date:ge.Z,Text:Ne.Z,Number:_e.Z,Textarea:we.Z,Select:be.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:qe.Z},data(){return{clinicalInputFields:[],value:[],drowdownOptions:[],options:[],dropdownLoading:!1,bools:{generalNoteLoading:!1,updateMode:!1,disableInput:!1}}},created(){this.setClinicalInputFields(),void 0!==this.editNoteInfo.clinical_note_code&&this.setUpdateInputFields(this.editNoteInfo),this.setInitValuesFields()},methods:{setInitValuesFields(e){},setClinicalInputFields(){this.disableInput=!0,this.clinicalInputFields=[],this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1},setUpdateInputFields(e){this.bools.updateMode=!0,this.disableInput=!0,this.clinicalInputFields=[],this.clinicalInputFields.push(e.result_format.fields),this.disableInput=!1},newEntry(){this.disableInput=!0,this.bools.updateMode=!1,this.bools.generalNoteLoading=!0,setTimeout((()=>{this.bools.generalNoteLoading=!1,this.clinicalInputFields=[],this.$emit("setClinicalNoteFormat",!0),this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1}),500)},addNewNote(){this.disableInput=!0,this.clinicalInputFields.push(this.clinicalNoteInfo.format.fields),this.disableInput=!1},addClinicalNoteDetails(){this.clinicalInputFields.push(this.clinicalNoteDetails)},goBackToSelection(){this.$emit("goBackToSelection",!0)},filterDropdown(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.drowdownOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.drowdownOptions})},async updateGeneralData(){let e="",t="",l="",i="1";for(const[s,n]of this.clinicalInputFields.entries()){let a=[];for(const[l,i]of this.$refs.clinicalNoteValue.entries())if(i.opts.index===s){let l=void 0===this.clinicalNoteInfo.title?null:this.clinicalNoteInfo.title;null!==l?this.clinicalNoteInfo.title.toUpperCase()===i.opts.label.toUpperCase()?e=`${void 0===i.value?"":i.value} - ${this.clinicalNoteInfo.name}`:t=this.clinicalNoteInfo.title:e=this.clinicalNoteInfo.title;const o={index:s,label:i.opts.label,name:i.opts.label,required:i.opts.required,requiredMessage:i.opts.requiredMessage,options:void 0===i.opts.options?"":i.opts.options,type:i.opts.type,code:i.opts.clinicalFieldCode,clinical_field_code:i.opts.clinicalFieldCode,remarks:null,value:void 0===i.value?"":i.value,active:1,id:i.opts.id};a.push(o)}const o=a.filter((e=>e.index===s));let n={caseNo:this.encounterCases[0].case_no,clinicalNoteCode:this.clinicalNoteInfo.clinicalNoteCode,clinicalNoteStatus:1,fields:o,title:this.clinicalNoteInfo.title};const c={case_no:this.encounterCases[0].case_no,clinical_note_code:this.clinicalNoteInfo.clinicalNoteCode,status:1,chief_complain_icd:"",chief_complaint_remarks:"",clinical_impression_icd:"",clinical_impression_remarks:"",updated_by:i,result_format:JSON.stringify(n),remarks:"",details:o,description:""===e?t:e};l=c}const a={clinicalEncounterID:this.editNoteInfo.clinical_encounter_id,finalUpdateData:l},o=await this.$store.dispatch("encounters/updatePatientEncounterDetails",a);void 0!==o.success&&this.showNotif("success","Success saving Patient General Data"),this.bools.generalNoteLoading=!1,this.$emit("checkGeneralNotes",!0),this.setClinicalInputFields()},async confirmSaveGeneralData(){this.$q.dialog({title:"Confirmation",message:"Are you sure you want to save this Clinical Note?",cancel:!0,persistent:!0}).onOk((()=>{console.log(">>>> OK"),this.saveGeneralData()})).onCancel((()=>{console.log(">>>> Cancel")}))},async saveGeneralData(){this.bools.generalNoteLoading=!0;let e="1",t="",l="",i=[];for(const[o,s]of this.clinicalInputFields.entries()){let a=[];for(const[e,i]of this.$refs.clinicalNoteValue.entries())if(i.opts.index===o){let e=void 0===this.clinicalNoteInfo.title?null:this.clinicalNoteInfo.title;null!==e?this.clinicalNoteInfo.title.toUpperCase()===i.opts.label.toUpperCase()?t=`${void 0===i.value?"":i.value} - ${this.clinicalNoteInfo.name}`:l=this.clinicalNoteInfo.title:t=this.clinicalNoteInfo.title;const s={index:o,label:i.opts.label,name:i.opts.label,required:i.opts.required,requiredMessage:i.opts.requiredMessage,options:i.opts.options,type:i.opts.type,code:i.opts.clinicalFieldCode,clinical_field_code:i.opts.clinicalFieldCode,remarks:null,value:void 0===i.value?"":i.value,active:1};a.push(s)}const s=a.filter((e=>e.index===o));let n={caseNo:this.encounterCases[0].case_no,clinicalNoteCode:this.clinicalNoteInfo.clinicalNoteCode,clinicalNoteStatus:1,fields:s,description:""===t?l:t};const c={case_no:this.encounterCases[0].case_no,status:1,chief_complain_icd:"",chief_complaint_remarks:"",clinical_impression_icd:"",clinical_impression_remarks:"",created_by:e,clinical_note_code:this.clinicalNoteInfo.clinicalNoteCode,result_format:n,remarks:"",details:s,description:""===t?l:t};i.push(c)}console.log(i,"finalGeneralData");const a=await this.$store.dispatch("encounters/savePatientEncounterDetails",i);console.log(a,"sldfkljsdkf"),void 0!==a.success&&this.showNotif("success","Success saving Patient General Data"),this.bools.generalNoteLoading=!1,this.$emit("checkGeneralNotes",!0),this.setClinicalInputFields()},showNotif(e,t){let l="";l="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:l})}}});var De=l(5269),Ie=l(6941),ke=l(6394),xe=l(6375);const Ee=(0,ee.Z)(ve,[["render",me]]),Ze=Ee;ne()(ve,"components",{QForm:De.Z,QScrollArea:te.Z,QCard:ae.Z,QCardSection:oe.Z,QInnerLoading:Ie.Z,QSpinnerGears:ke.Z,QBtnGroup:xe.Z,QBtn:le.Z});const Te=(0,i.aZ)({name:"MainTableEMR",props:["clinicalNote","columnTable","rowTable"],data(){return{columns:[{name:"desc",required:!0,label:"Dessert (100g serving)",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"calories",align:"center",label:"Calories",field:"calories",sortable:!0},{name:"fat",label:"Fat (g)",field:"fat",sortable:!0},{name:"carbs",label:"Carbs (g)",field:"carbs"}],rows:[{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Cupcake",calories:305,fat:3.7,carbs:67},{name:"Frozen Yogurt",calories:159,fat:6,carbs:24},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37},{name:"Eclair",calories:262,fat:16,carbs:23},{name:"Cupcake",calories:305,fat:3.7,carbs:67}],filter:""}},mounted(){},methods:{openNoteMode(){this.$emit("openNoteMode",!0)}}});var Ve=l(8107),Me=l(4842),Fe=l(4554);ne()(Te,"components",{QTable:Ve.Z,QBtn:le.Z,QInput:Me.Z,QIcon:Fe.Z});const We={class:"row justify-between bg-grey-4 items-center text-uppercase"},Se={class:"text-weight-light text-h5 q-pa-md"},Re={key:0},Qe={class:"stripped"},$e={class:"q-pa-md col-4 text-weight-bold"},Le={class:"q-pa-md col-8"},je={class:"q-pa-sm row items-center justify-end"},Oe={class:"row justify-between bg-grey-4 items-center text-uppercase"},Ue={class:"text-weight-light text-h5 q-pa-md"},Pe={class:"flex flex-center column q-pa-md"},Ae={key:1},Ge={key:2,class:"text-h6 text-uppercase text-weight-light"};function ze(e,t,l,o,s,n){const c=(0,i.up)("q-icon"),r=(0,i.up)("q-input"),d=(0,i.up)("q-tree"),u=(0,i.up)("q-scroll-area"),h=(0,i.up)("q-btn"),f=(0,i.up)("q-card-section"),m=(0,i.up)("q-card"),g=(0,i.up)("q-slide-transition"),N=(0,i.up)("q-splitter"),_=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(N,{modelValue:e.splitterModel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitterModel=t),style:{height:"84vh"}},{before:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"fit"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:"Filter Clinical Notes"},{append:(0,i.w5)((()=>[""!==e.filter?((0,i.wg)(),(0,i.j4)(c,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):(0,i.kq)("",!0)])),_:1},8,["modelValue"]),(0,i.Wm)(d,{class:"col-2 text-h6 text-weight-light",nodes:e.clinicalNoteTree,"node-key":"code","label-key":"name","tick-strategy":"strict",ticked:e.ticked,"onUpdate:ticked":t[1]||(t[1]=t=>e.ticked=t),"default-expand-all":"",filter:e.filter},null,8,["nodes","ticked","filter"])])),_:1})])),after:(0,i.w5)((()=>[e.showPatientClinicalNoteDetailsFilter()?((0,i.wg)(),(0,i.j4)(r,{key:0,square:"",filled:"",color:"blue-10",label:"Filter Result",class:"q-pa-md",debounce:"500",modelValue:e.filterResult,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filterResult=t)},null,8,["modelValue"])):(0,i.kq)("",!0),(0,i.Wm)(u,{style:{height:"73vh"},visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinical_notes,(t=>((0,i.wg)(),(0,i.iD)("div",{key:`patient_clinical_note_detail-${t.code}`},[e.filtered_patient_clinical_note_details[t.code]&&e.filtered_patient_clinical_note_details[t.code].rows&&e.filtered_patient_clinical_note_details[t.code].rows.length>0&&e.ticked.includes(t.code)?((0,i.wg)(),(0,i.j4)(m,{key:0,class:"shadow-0 q-mx-md q-pb-md"},{default:(0,i.w5)((()=>[void 0===t.categorical_type?((0,i.wg)(),(0,i.j4)(f,{key:0,class:"q-pa-none cursor-pointer",onClick:l=>e.expandNote(t.code)},{default:(0,i.w5)((()=>[(0,i._)("div",We,[(0,i._)("div",Se,(0,a.zw)(t.name),1),(0,i._)("div",null,[e.filtered_patient_clinical_note_details[t.code].rows.length>0?((0,i.wg)(),(0,i.iD)("div",Re,[t.allow_multiple?((0,i.wg)(),(0,i.j4)(h,{key:0,icon:"fa fa-plus",flat:"",round:"",color:"blue-10",class:"q-mr-md",onClick:l=>e.openEntryNotes(t)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(c,{flat:"",round:"",size:"md",class:"q-pr-md",name:this.filtered_patient_clinical_note_details[t.code].status?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])])):(0,i.kq)("",!0)])])])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(f,{class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(m,{square:"",class:"shadow-0 cursor-pointer"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{square:"",bordered:"",class:"shadow-0 row q-pt-md q-pr-md q-pl-md"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filtered_patient_clinical_note_details[t.code].rows,((l,o)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-12 q-mb-md",key:o},[(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{class:"q-pa-none shadow-0 cursor-pointer",square:"",bordered:"",onClick:t=>e.getRow(l)},{default:(0,i.w5)((()=>[(0,i._)("div",Qe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filtered_patient_clinical_note_details[t.code].fields,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"row child",key:t,bordered:""},[(0,i._)("div",$e,(0,a.zw)(e.label),1),(0,i._)("div",Le,(0,a.zw)(l[e.field]),1)])))),128)),(0,i._)("div",je,[(0,i.Wm)(h,{icon:"fa fa-edit",color:"blue-10",flat:"",round:""})])])])),_:2},1032,["onClick"])),[[_,void 0,"grey-5"]])])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1536),[[p.F8,this.filtered_patient_clinical_note_details[t.code].status]])])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,i.kq)("",!0),e.filtered_patient_clinical_note_details[t.code]&&e.filtered_patient_clinical_note_details[t.code].rows&&0!==e.filtered_patient_clinical_note_details[t.code].rows.length||!e.ticked.includes(t.code)||void 0!==t.categorical_type?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(m,{key:1,square:"",flat:"",class:"shadow-0 q-mx-md q-pb-md"},{default:(0,i.w5)((()=>[void 0===t.categorical_type?((0,i.wg)(),(0,i.j4)(f,{key:0,class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i._)("div",Oe,[(0,i._)("div",Ue,(0,a.zw)(t.name),1)])])),_:2},1024)):(0,i.kq)("",!0),(0,i.Wm)(f,{class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{square:"",bordered:"",class:"shadow-0"},{default:(0,i.w5)((()=>[(0,i._)("div",Pe,[e.isFiltered?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(h,{key:0,icon:"fa fa-plus",flat:"",round:"",color:"blue-10",onClick:l=>e.openEntryNotes(t)},null,8,["onClick"])),e.isFiltered?((0,i.wg)(),(0,i.iD)("div",Ge,' No rows matching "'+(0,a.zw)(e.filterResult)+'". ',1)):((0,i.wg)(),(0,i.iD)("div",Ae," No Clinical Note for "+(0,a.zw)(t.name)+" yet. ",1))])])),_:2},1024)])),_:2},1024)])),_:2},1024))])))),128))])),_:1})])),_:1},8,["modelValue"])])}const He=(0,i.aZ)({name:"ClinicalNoteHierarchy",props:["clinicalNoteTree"],data(){return{filter:"",filterRef:null,filterResult:"",splitterModel:30,ticked:[],patient_clinical_note_details:{},filtered_patient_clinical_note_details:{},clinicalEncounterListsColors:["bg-grey-1, bg-grey-2"],clinical_notes:[],isFiltered:!1,expanded:[]}},watch:{clinicalEncounters(e){e.length>0&&this.init(),this.ticked=this.getKeys(this.clinicalNoteTree),this.clinical_notes=this.getFlatArray(this.clinicalNoteTree)},clinicalNoteTree(e){},filterResult(e){if(this.filtered_patient_clinical_note_details=JSON.parse(JSON.stringify(this.patient_clinical_note_details)),""!==e&&null!==e){this.isFiltered=!0;for(const e in this.filtered_patient_clinical_note_details)for(let t=this.filtered_patient_clinical_note_details[e].rows.length-1;t>=0;t--){let l=!1;for(const i in this.filtered_patient_clinical_note_details[e].rows[t])if(this.filtered_patient_clinical_note_details[e].rows[t][i].toLowerCase().includes(this.filterResult.toLowerCase())){l=!0;break}l||this.filtered_patient_clinical_note_details[e].rows.splice(t,1)}}else this.isFiltered=!1}},computed:{...(0,de.Se)({clinicalEncounters:"encounters/clinicalEncounters"})},methods:{expandNote(e){this.filtered_patient_clinical_note_details[e].status=!this.filtered_patient_clinical_note_details[e].status},getPatientClinicalNoteDetails:function(e){const t={};let l=[];for(const i of e){void 0===t[i.clinical_note_code]&&(t[i.clinical_note_code]={clinicalNoteCode:i.clinical_note_code,label:i.clinical_note||"",status:!0,fields:[],rows:[]});for(const e of i.result_format.fields){let l=!1;for(const a of t[i.clinical_note_code].fields)if(a.field===e.code){l=!0;break}l||t[i.clinical_note_code].fields.push({field:e.code,label:e.name,name:e.code,align:"center",sortable:!0})}t[i.clinical_note_code].fields.push({field:"updated_by",label:"Updated By",name:"updated_by",align:"center",sortable:!0},{field:"datetime_updated",label:"Update Date",name:"datetime_updated",align:"center",sortable:!0}),l=t[i.clinical_note_code].fields.filter(((e,t,l)=>t===l.findIndex((t=>t.label===e.label)))),t[i.clinical_note_code].fields=l}for(const i of e)for(const e in t)if(e===i.clinical_note_code){const l={};for(const e of i.result_format.fields)void 0===l[e.code]&&(l[e.code]=e.value),void 0===l["updated_by"]&&(l["updated_by"]=i.user_name),void 0===l["datetime_updated"]&&(l["datetime_updated"]=i.update_datetime),void 0===l["result_format"]&&(l["result_format"]=JSON.stringify(i.result_format)),void 0===l["clinical_encounter_id"]&&(l["clinical_encounter_id"]=i.clinical_encounter_id.toString()),void 0===l["clinical_note_code"]&&(l["clinical_note_code"]=i.clinical_note_code),void 0===l["clinical_note_name"]&&(l["clinical_note_name"]=i.clinical_note);t[e].rows.push(l)}return t},async init(){const e=JSON.parse(JSON.stringify(this.clinicalEncounters));this.patient_clinical_note_details=this.getPatientClinicalNoteDetails(e),this.filtered_patient_clinical_note_details=JSON.parse(JSON.stringify(this.patient_clinical_note_details))},openEntryNotes(e){const t={clinicalNoteCode:e.code};this.$emit("openEntryNotes",t)},resetFilter(){this.filter="",this.$refs.filterRef.focus()},getRow(e){this.$emit("setUpdateNote",e)},getKeys(e,t=[]){if(!e)throw"Incomplete arguments.";for(const l of e)t.push(l.code),null!=l.children&&l.children.length>0&&this.getKeys(l.children,t);return t},getFlatArray(e,t=[]){if(!e)throw"Incomplete arguments.";for(const l of e){const e=JSON.parse(JSON.stringify(l));delete e.children,t.push(e),null!=l.children&&l.children.length>0&&this.getFlatArray(l.children,t)}return t},showPatientClinicalNoteDetailsFilter(){for(const e of this.ticked)for(const t of this.clinical_notes)if(t.code===e&&void 0===t.categorical_type)return!0;return!1}}});var Be=l(218),Ke=l(5078),Ye=l(2471),Je=l(6489);const Xe=(0,ee.Z)(He,[["render",ze]]),et=Xe;ne()(He,"components",{QSplitter:Be.Z,QScrollArea:te.Z,QInput:Me.Z,QIcon:Fe.Z,QTree:Ke.Z,QCard:ae.Z,QCardSection:oe.Z,QBtn:le.Z,QSlideTransition:Ye.Z,QTable:Ve.Z}),ne()(He,"directives",{Ripple:Je.Z});const tt=(0,i.aZ)({name:"PatientEncounterInfo",props:["clinicalNoteCategoryTree"],components:{PatientChart:L.Z,TestResult:j.Z,PatientInfo:O.Z,ClinicalNotesDashboard:re,GeneralNoteEntry:Ze,ClinicalNoteHierarchy:et},data(){return{tab:"generalInfo",bools:{isDialogOpen:!1,isGeneralInfoOpen:!1,generalNoteLoading:!1,generalEntryLoading:!1,enableEntry:!1,noteMode:!1},selectedNote:[],boolean:!0,clinicalNotesLists:[],clinicalEncounterLists:[],clinicalEncounterListsColors:["bg-blue-6","bg-blue-7","bg-blue-8","bg-blue-9","bg-blue-10"],details:{caseNo:null,name:null,birthdate:null,sex:null,patientCategory:null,chiefComplaint:null},clinicalNoteInfo:{currentTitle:null,title:null,name:null,format:null,clinicalNoteCode:null,clinicalCategoryCode:null,clinicalCategoryName:null,clinicalNotes:[]},editNoteInfo:[],encounterInfo:[{label:"Category",field:"category"},{label:"Room",field:"room"},{label:"Unit",field:"unit"},{label:"Ward",field:"ward"},{label:"Admission Date",field:"admitted"},{label:"Discharge Date",field:"discharged"},{label:"Chief Complaint",field:"chiefComplaint"}],generalDataNotes:[],splitterModel:70,splitterModel2:30,columnTable:[],rowTable:[],clinicalNoteTable:[],clinicalNoteTree:[]}},computed:{...(0,de.Se)({encounterCases:"encounters/encounterCases",clinicalEncounters:"encounters/clinicalEncounters",generalNotes:"clinicalNotes/generalNotes",clinicalNotes:"clinicalNotes/clinicalNotes",patientGeneralNotes:"encounters/patientGeneralNotes"}),caseInfo(){return 0==this.encounterCases.length?{}:this.encounterCases.map((e=>({caseno:e.case_no,patientno:e.patient_no,lastname:e.last_name,firstname:e.first_name,middlename:e.middle_name,gender:e.sex,birthdate:e.birthDate,category:e.patient_category,room:e.room,unit:e.room_unit,ward:e.ward,admitted:new Date(e.datetime_admitted).toDateString(),discharged:e.datetime_discharged?new Date(e.datetime_discharged).toDateString():"",chiefComplaint:e.chief_complaint})))[0]}},created(){this.initialize()},methods:{async initialize(){this.generalDataNotes=this.generalNotes,this.clinicalTabLoading=!1},nodeMode(){console.log("herere"),this.bools.noteMode=!0},setEntryNotes(e){console.log(e,";valvlalv"),this.bools.generalNoteLoading=!0,this.bools.noteMode=!0,this.setClinicalNotes(e),setTimeout((async()=>{this.bools.generalNoteLoading=!1}),500)},async openGeneralDataDialog(e){this.bools.isGeneralInfoOpen=!0,this.bools.generalNoteLoading=!0,this.clinicalNoteInfo.clinicalCategoryCode=e.code,this.clinicalNoteInfo.clinicalCategoryName=e.name;var t=this.clinicalNoteCategoryTree.filter((t=>t.code===e.code));this.clinicalNoteTree=t,setTimeout((async()=>{console.log(e),this.clinicalNotesLists=e.children,this.fetchGeneralNotes()}),500)},async setClinicalNotes(e){void 0!==e.clinicalNoteCode&&(this.editNoteInfo=[]);const t=void 0===e.clinical_note_code?e.clinicalNoteCode:e.clinical_note_code;var l=this.clinicalNotes.filter((e=>e.code===t));console.log(l),this.setClinicalNoteInfo(l[0],!0),this.fetchGeneralNotes()},async setClinicalNoteInfo(e,t){if(this.clinicalNoteInfo.name=e.name,this.clinicalNoteInfo.clinicalNoteCode=e.code,this.clinicalNoteInfo.format=e.template_format,t){let t=void 0===e.template_format.title?null:e.template_format.title;this.clinicalNoteInfo.title=null===t?e.name:t}else{var l=this.clinicalNotes.filter((t=>t.code===e.code));console.log(l);let t=void 0===l[0].template_format.title?null:l[0].template_format.title;this.clinicalNoteInfo.title=null===t?l[0].name:t}},async fetchGeneralNotes(){let e="";e={patientNo:this.encounterCases[0].patientID,clinicalCategoryCode:this.clinicalNoteInfo.clinicalCategoryCode,checking:!0,byCategoryCode:!0},await this.$store.dispatch("encounters/getClinicalEncounters",e),console.log(this.clinicalEncounters),this.clinicalEncounterLists=this.clinicalEncounters,this.bools.generalNoteLoading=!1},setInit(){this.bools.enableEntry=!1,this.bools.generalNoteLoading=!0,this.editNoteInfo=[],this.fetchGeneralNotes()},setUpdateNote(e){console.log(e),this.bools.noteMode=!0,this.bools.enableEntry=!0;const t={clinical_note_code:e.clinical_note_code,clinical_note:e.clinical_note_name,result_format:JSON.parse(e.result_format),clinical_encounter_id:parseInt(e.clinical_encounter_id)};this.setPatientNotes(t)},setPatientNotes(e){this.bools.generalEntryLoading=!0,this.bools.generalNoteLoading=!0,setTimeout((()=>{this.editNoteInfo=e;const t={name:e.clinical_note,code:e.clinical_note_code,template_format:e.result_format,title:e.clinical_note};this.setClinicalNoteInfo(t,!1),this.bools.generalEntryLoading=!1,this.bools.generalNoteLoading=!1}),500)},setInitEditFields(){this.editNoteInfo=[],this.clinicalEncounterLists=[],this.bools.enableEntry=!1,this.bools.isGeneralInfoOpen=!1,this.selectedNote=null,this.bools.noteMode=!1,this.clinicalNoteInfo.currentTitle=null,this.clinicalNoteInfo.title=null,this.clinicalNoteInfo.name=null,this.clinicalNoteInfo.format=null,this.clinicalNoteInfo.clinicalNoteCode=null,this.clinicalNoteInfo.clinicalCategoryCode=null,this.clinicalNoteInfo.clinicalCategoryName=null}},watch:{clinicalEncounters(e){console.log(e,"val")},selectedNote(e){this.setClinicalNotes(e)},bools:{async handler(e){e.isGeneralInfoOpen||this.setInitEditFields()},deep:!0}}});var lt=l(7547),it=l(8408),at=l(5906),ot=l(6602),st=l(5869),nt=l(8870),ct=l(1070),rt=l(9367);const dt=(0,ee.Z)(tt,[["render",$]]),ut=dt;ne()(tt,"components",{QTabs:lt.Z,QTab:it.Z,QTabPanels:at.Z,QTabPanel:ot.Z,QCard:ae.Z,QCardSection:oe.Z,QIcon:Fe.Z,QSeparator:st.Z,QBtn:le.Z,QTooltip:nt.Z,QDialog:ie.Z,QScrollArea:te.Z,QSplitter:Be.Z,QTree:Ke.Z,QTable:Ve.Z,QInnerLoading:Ie.Z,QSpinnerBall:ct.Z,QCardActions:rt.Z}),ne()(tt,"directives",{Ripple:Je.Z});const pt={class:"bg-transparent"},ht={key:0,class:"row justify-end q-pa-sm"},ft={key:1,class:"q-pa-md"},mt={key:0};function gt(e,t,l,a,o,s){const n=(0,i.up)("q-skeleton"),c=(0,i.up)("q-icon"),r=(0,i.up)("q-input"),d=(0,i.up)("q-tree"),u=(0,i.up)("q-tab"),p=(0,i.up)("q-tabs"),h=(0,i.up)("q-separator"),f=(0,i.up)("other-clinical-notes"),m=(0,i.up)("q-tab-panel"),g=(0,i.up)("clinical-note-fields"),N=(0,i.up)("q-tab-panels"),_=(0,i.up)("q-splitter"),w=(0,i.up)("q-card-section"),b=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",pt,[(0,i.Wm)(b,{square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(_,{modelValue:e.splitterModel,"onUpdate:modelValue":t[7]||(t[7]=t=>e.splitterModel=t)},{before:(0,i.w5)((()=>[this.bools.loadTree?((0,i.wg)(),(0,i.iD)("div",ht,[(0,i.Wm)(n,{animation:"wave",width:"100%",class:"q-mb-md"}),(0,i.Wm)(n,{animation:"wave",width:"90%",class:"q-mb-md"}),(0,i.Wm)(n,{animation:"wave",width:"80%",class:"q-mb-md"})])):((0,i.wg)(),(0,i.iD)("div",ft,[(0,i.Wm)(r,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:"Filter Clinical Notes"},{append:(0,i.w5)((()=>[""!==e.filter?((0,i.wg)(),(0,i.j4)(c,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):(0,i.kq)("",!0)])),_:1},8,["modelValue"]),(0,i.Wm)(d,{nodes:this.clinicalNoteCat,"node-key":"code","label-key":"name","selected-color":"primary",selected:e.selected,"onUpdate:selected":t[1]||(t[1]=t=>e.selected=t),filter:e.filter,"default-expand-all":""},null,8,["nodes","selected","filter"])]))])),after:(0,i.w5)((()=>[e.bools.showInputFields?((0,i.wg)(),(0,i.iD)("div",mt,[(0,i.Wm)(p,{modelValue:e.tab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tab=t),dense:"",class:"text-grey bg-blue-10","active-color":"white","indicator-color":"yellow-10",align:"justify","narrow-indicator":""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"clinicalNotes",label:"Clinical Notes"}),(0,i.Wm)(u,{name:"clinicalNotesEntry",label:"Clinical Notes Entry"})])),_:1},8,["modelValue"]),(0,i.Wm)(h),(0,i.Wm)(N,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=t=>e.tab=t),animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"clinicalNotes"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{clinicalNoteDetails:this.clinicalNoteDetails[0],clinicalEncounters:this.clinicalEncounters,onGetClinicalNotes:t[3]||(t[3]=e=>this.checkCase())},null,8,["clinicalNoteDetails","clinicalEncounters"])])),_:1}),(0,i.Wm)(m,{name:"clinicalNotesEntry"},{default:(0,i.w5)((()=>[this.clinicalNoteDetails.length>0?((0,i.wg)(),(0,i.j4)(g,{key:0,onGetClinicalNotes:t[4]||(t[4]=t=>e.tab="clinicalNotes"),onCloseAddDialog:t[5]||(t[5]=t=>e.addModal=!1)})):(0,i.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])):(0,i.kq)("",!0)])),_:1},8,["modelValue"])])])),_:1})])),_:1})])])}const Nt={class:"q-px-md"},_t={class:"row justify-between"},wt=(0,i._)("div",null,null,-1);function bt(e,t,l,a,o,s){const n=(0,i.up)("q-btn"),c=(0,i.up)("q-card"),r=(0,i.up)("q-separator"),d=(0,i.up)("Date"),u=(0,i.up)("Text"),p=(0,i.up)("Number"),h=(0,i.up)("Textarea"),f=(0,i.up)("Select"),m=(0,i.up)("ICD10"),g=(0,i.up)("NumberRange"),N=(0,i.up)("DateRange"),_=(0,i.up)("q-scroll-area");return(0,i.wg)(),(0,i.iD)("div",Nt,[(0,i.Wm)(c,{class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i._)("div",_t,[wt,(0,i._)("div",null,[(0,i.Wm)(n,{color:"blue-10",push:"",rounded:"",label:"Save Clinical Note",icon:"fa fa-save",onClick:e.saveClinicalNoteEncounter},null,8,["onClick"])])])])),_:1}),(0,i.Wm)(r,{class:"q-my-sm"}),(0,i.Wm)(_,{style:{height:"450px"},ref:"scrollArea",visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.templateDetails,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"q-ma-md"},["date"==e.type?((0,i.wg)(),(0,i.j4)(d,{key:0,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==e.type?((0,i.wg)(),(0,i.j4)(u,{key:1,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==e.type?((0,i.wg)(),(0,i.j4)(p,{key:2,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==e.type?((0,i.wg)(),(0,i.j4)(h,{key:3,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"select"==e.type?((0,i.wg)(),(0,i.j4)(f,{key:4,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,options:e.options,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==e.type?((0,i.wg)(),(0,i.j4)(m,{key:5,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==e.type?((0,i.wg)(),(0,i.j4)(g,{key:6,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==e.type?((0,i.wg)(),(0,i.j4)(N,{key:7,opts:{label:e.label,requiredMessage:e.requiredMessage,required:e.required,type:e.type,clinicalNoteCode:e.clinicalNoteCode,clinicalFieldCode:e.code},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,i.kq)("",!0)])))),128))])),_:1},512)])}const Ct=(0,i.aZ)({name:"ClinicalNoteFields",props:["panel"],computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails",clinicalNoteDetailValues:"clinicalNotes/clinicalNoteDetailValues",clinicalNoteTemplateFormat:"clinicalNotes/clinicalNoteTemplateFormat",encounterCases:"encounters/encounterCases",templateDetails:"clinicalNotes/templateDetails"})},components:{Date:ge.Z,Text:Ne.Z,Number:_e.Z,Textarea:we.Z,Select:be.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:qe.Z},data(){return{clinicalInputFields:[],value:[],drowdownOptions:[],options:[],dropdownLoading:!1}},created(){this.addClinicalNoteDetails()},methods:{setClinicalInputFields(){this.clinicalInputFields=this.clinicalNoteDetails},addClinicalNoteDetails(){console.log(this.clinicalNoteDetails),this.clinicalInputFields.push(this.clinicalNoteDetails)},filterDropdown(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.drowdownOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.drowdownOptions})},async getClinicalNoteDetailValues(e){this.dropdownLoading=!0,await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetailValues",e);var t=[];for(var l of this.clinicalNoteDetailValues)t.push(l.Value);this.drowdownOptions=t,this.dropdownLoading=!1},async saveClinicalNoteEncounter(){const e={caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.clinicalNoteDetails[0].clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/saveClinicalEncounter",e);if(!t[0].ERR){for(var l of this.$refs.clinicalNoteValue){const e={clinicalFieldCode:l.opts.clinicalFieldCode,clinicalNoteValue:l.value,clinicalEncounterID:t[0].ENCOUNTERID},i=await this.$store.dispatch("encounters/saveClinicalEncounterDetails",e);if(i[0].ERR)return this.showNotif("error",`Error saving ${i}`),!1}this.showNotif("success","Clinical Note Saved"),this.$emit("getClinicalNotes",!0)}},showNotif(e,t){let l="";l="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:l})}}});var yt=l(3944),qt=l(6915),vt=l(3017),Dt=l(3414),It=l(2035),kt=l(677);const xt=(0,ee.Z)(Ct,[["render",bt]]),Et=xt;ne()(Ct,"components",{QCard:ae.Z,QInput:Me.Z,QIcon:Fe.Z,QPopupProxy:yt.Z,QDate:qt.Z,QBtn:le.Z,QSelect:vt.Z,QItem:Dt.Z,QItemSection:It.Z,QSeparator:st.Z,QScrollArea:te.Z}),ne()(Ct,"directives",{ClosePopup:kt.Z});const Zt={class:"text-h6"},Tt={class:"row q-col-gutter-md justify-between"},Vt={class:"col-auto"},Mt=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"Created By",-1),Ft={class:"col text-md text-uppercase"},Wt={class:"col-auto"},St=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"SAVE DATE",-1),Rt={class:"col text-md text-uppercase"},Qt={key:1,style:{height:"450px"},class:"flex flex-center text-h5"};function $t(e,t,l,o,s,n){const c=(0,i.up)("q-card"),r=(0,i.up)("q-separator"),d=(0,i.up)("q-scroll-area"),u=(0,i.up)("clinical-note-details"),p=(0,i.up)("q-dialog"),h=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Zt,(0,a.zw)(this.clinicalNoteDetails.clinical_note),1),(0,i.Uk)(" "+(0,a.zw)(this.clinicalNoteDetails.clinical_note_description),1)])])),_:1}),(0,i.Wm)(r,{class:"q-my-sm"}),this.clinicalEncounters.length>0?((0,i.wg)(),(0,i.j4)(c,{key:0,class:"shadow-0",borderless:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{style:{height:"450px"},ref:"scrollArea",visible:!0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.clinicalEncounters,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:"q-ma-md row q-col-gutter-md"},[(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{square:"",borderless:"",class:"shadow-1 full-width cursor-pointer q-pa-md bg-blue-10 text-white",style:{"border-left":"8px solid #f57f17 !important"},onClick:l=>e.showClinicalNoteDetails(t)},{default:(0,i.w5)((()=>[(0,i._)("div",Tt,[(0,i._)("div",Vt,[Mt,(0,i._)("div",Ft,(0,a.zw)(t.user_name)+" - "+(0,a.zw)(t.role),1)]),(0,i._)("div",Wt,[St,(0,i._)("div",Rt,(0,a.zw)(t.formattedUpdateDatetime),1)])])])),_:2},1032,["onClick"])),[[h]])])))),128))])),_:1},512)])),_:1})):((0,i.wg)(),(0,i.iD)("div",Qt," NO DATA AVAILABLE ")),(0,i.Wm)(p,{modelValue:e.clinicalNoteDialogDetails,"onUpdate:modelValue":t[1]||(t[1]=t=>e.clinicalNoteDialogDetails=t),"full-height":"","full-width":"",persistent:"",maximized:"",class:"q-pa-none q-ma-none",onCloseAddDialog:t[2]||(t[2]=t=>e.clinicalNoteDialogDetails=!1)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"q-pa-none q-ma-none",onCloseDialog:t[0]||(t[0]=t=>e.clinicalNoteDialogDetails=!1),selectedClinicalNote:this.selectedClinicalNote},null,8,["selectedClinicalNote"])])),_:1},8,["modelValue"])])}const Lt={class:"row q-col-gutter-md justify-between"},jt={class:"col-auto"},Ot=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"Created By",-1),Ut={class:"col text-md text-uppercase"},Pt={class:"col-auto"},At=(0,i._)("div",{class:"col-auto text-uppercase text-xs"},"SAVE DATE",-1),Gt={class:"col text-md text-uppercase"};function zt(e,t,l,o,s,n){const c=(0,i.up)("q-card-section"),r=(0,i.up)("Date"),d=(0,i.up)("Text"),u=(0,i.up)("Number"),p=(0,i.up)("Textarea"),h=(0,i.up)("Select"),f=(0,i.up)("ICD10"),m=(0,i.up)("NumberRange"),g=(0,i.up)("DateRange"),N=(0,i.up)("q-scroll-area"),_=(0,i.up)("q-btn"),w=(0,i.up)("q-btn-group"),b=(0,i.up)("q-card-actions"),C=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(C,{square:"",class:"q-pa-0 q-ma-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-blue-10 text-white fixed-top"},{default:(0,i.w5)((()=>[(0,i._)("div",Lt,[(0,i._)("div",jt,[Ot,(0,i._)("div",Ut,(0,a.zw)(e.selectedClinicalNote.user_name)+" - "+(0,a.zw)(e.selectedClinicalNote.role),1)]),(0,i._)("div",Pt,[At,(0,i._)("div",Gt,(0,a.zw)(e.selectedClinicalNote.formattedUpdateDatetime),1)])])])),_:1}),(0,i.Wm)(N,{class:"fit"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"q-mt-xl q-mb-xl"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.resultFormat,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"q-ma-md"},["date"==e.opts.type?((0,i.wg)(),(0,i.j4)(r,{key:0,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"text"==e.opts.type?((0,i.wg)(),(0,i.j4)(d,{key:1,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"number"==e.opts.type?((0,i.wg)(),(0,i.j4)(u,{key:2,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"textarea"==e.opts.type?((0,i.wg)(),(0,i.j4)(p,{key:3,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"select"==e.opts.type?((0,i.wg)(),(0,i.j4)(h,{key:4,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,options:e.opts.options,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"icd10"==e.opts.type?((0,i.wg)(),(0,i.j4)(f,{key:5,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,value:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"numberRange"==e.opts.type?((0,i.wg)(),(0,i.j4)(m,{key:6,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):"dateRange"==e.opts.type?((0,i.wg)(),(0,i.j4)(g,{key:7,opts:{label:e.opts.label,requiredMessage:e.opts.requiredMessage,required:e.opts.required,type:e.opts.type,clinicalNoteCode:e.opts.clinicalNoteCode,clinicalFieldCode:e.opts.clinicalFieldCode,currentValue:e.value,withValue:!0,disable:this.disableInput},ref_for:!0,ref:"clinicalNoteValue"},null,8,["opts"])):(0,i.kq)("",!0)])))),128))])),_:1})])),_:1}),(0,i.Wm)(b,{align:"right",class:"q-pa-md bg-blue-10 text-white fixed-bottom"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[this.disableInput?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(_,{key:0,onClick:t[0]||(t[0]=t=>e.updateClinicalNote()),label:"Update",icon:"fa fa-save",color:"green"})),(0,i.Wm)(_,{onClick:t[1]||(t[1]=t=>e.closeDialog()),label:"Close",icon:"fa fa-times",color:"red"})])),_:1})])),_:1})])),_:1})}const Ht=(0,i.aZ)({name:"ClinicalNoteDetails",props:["selectedClinicalNote"],data(){return{resultFormat:[],disableInput:!1}},components:{Date:ge.Z,Text:Ne.Z,Number:_e.Z,Textarea:we.Z,Select:be.Z,ICD10:Ce.Z,NumberRange:ye.Z,DateRange:qe.Z},computed:{...(0,de.Se)({clinicalEncounters:"encounters/clinicalEncounters",userCredentials:"user/credentials",encounterCases:"encounters/encounterCases",clinicalEncounterDetails:"encounters/clinicalEncounterDetails"})},created(){this.formatResult()},methods:{formatResult(){this.resultFormat=this.selectedClinicalNote.result_format.fields,this.selectedClinicalNote.user_id!==this.userCredentials.userID&&(this.disableInput=!0)},async updateClinicalNote(){const e={clinicalEncounterID:this.selectedClinicalNote.clinical_encounter_id,userID:1,resultFormat:{caseNo:this.encounterCases[0].caseNumber,clinicalNoteCode:this.selectedClinicalNote.clinical_note_code,clinicalNoteStatus:1,fields:this.$refs.clinicalNoteValue}},t=await this.$store.dispatch("encounters/updateClinicalEncounter",e);if(!t[0].ERR){for(var l of this.$refs.clinicalNoteValue){var i=this.clinicalEncounterDetails.filter((e=>e.clinical_field_code===l.opts.clinicalFieldCode));const e={clinicalEncounterDetailID:i[0].id,clinicalFieldValue:l.value},t=await this.$store.dispatch("encounters/updateClinicalEncounterDetails",e);if(t[0].ERR)return this.showNotif("error",`Error saving ${t}`),!1}this.showNotif("success","Clinical Note Details Updated"),this.closeDialog()}},closeDialog(){this.$emit("closeDialog",!0)},showNotif(e,t){let l="";l="success"===e?"blue-10":"negative",this.$q.notify({progress:!0,message:t,color:l})}}}),Bt=(0,ee.Z)(Ht,[["render",zt]]),Kt=Bt;ne()(Ht,"components",{QCard:ae.Z,QCardSection:oe.Z,QScrollArea:te.Z,QCardActions:rt.Z,QBtnGroup:xe.Z,QBtn:le.Z});const Yt=(0,i.aZ)({name:"OtherClinicalNotes",props:["clinicalNoteDetails","clinicalEncounters"],data(){return{selectedClinicalNote:[],clinicalNoteDialogDetails:!1}},watch:{clinicalNoteDialogDetails(e){e||(this.selectedClinicalNote=[],this.$emit("getClinicalNotes",!0))}},methods:{async showClinicalNoteDetails(e){this.selectedClinicalNote=e,this.clinicalNoteDialogDetails=!0;const t={clinicalEncounterID:e.clinical_encounter_id};console.log(e),await this.$store.dispatch("encounters/getClinicalEncounterDetails",t)}},components:{ClinicalNoteDetails:Kt}}),Jt=(0,ee.Z)(Yt,[["render",$t]]),Xt=Jt;ne()(Yt,"components",{QCard:ae.Z,QSeparator:st.Z,QScrollArea:te.Z,QDialog:ie.Z}),ne()(Yt,"directives",{Ripple:Je.Z});const el=(0,i.aZ)({name:"MainEMR",props:["clinicalNoteCategories","clinicalNoteCategoryTree"],components:{ClinicalNoteFields:Et,OtherClinicalNotes:Xt},data(){return{tab:"clinicalNotes",bools:{showInputFields:!1,loadTree:!1},splitterModel:18,splitterMobileModel:25,mobileTabShow:!1,clinicalTabs:"",search:"",selectionMenu:!1,clinicalNoteCat:[],clinicalNoteHistory:[],clinicalTabLoading:!1,selected:"",filter:"",filterRef:null}},computed:{...(0,de.Se)({colorEMR:"helpers/colorEMR",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncounters:"encounters/clinicalEncounters",userRole:"helpers/userRole",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows",encounterCases:"encounters/encounterCases",clinicalCategoryNotes:"clinicalNotes/clinicalCategoryNotes",clinicalNoteDetails:"clinicalNotes/clinicalNoteDetails"})},watch:{clinicalNoteCategoryTree(e){console.log(e,"herer"),this.clinicalNoteCat=this.clinicalNoteCategoryTree},selected(e){console.log(e)},clinicalCategoryNotes(e){this.clinicalNoteCat=e},async clinicalTabs(e){await this.getClinicalNotes(e)},clinicalNoteCat(e){e.length>0&&(this.clinicalTabs=e[0].categoryCode)},tab(e){this.showClinicalDetails(e),this.checkCase()}},async created(){await this.formatClinicalNoteCategoryTree()},methods:{async formatClinicalNoteCategoryTree(){this.bools.loadTree=!0,setTimeout((()=>{console.log(this.clinicalNoteCat,"1"),this.clinicalNoteCat=this.clinicalNoteCategoryTree,this.bools.loadTree=!1,console.log(this.clinicalNoteCat,"2")}),1500)},async showClinicalDetails(e){var t="";for(var l of this.clinicalCategoryNotes){const i=l.children.filter((t=>t.label===e));if(void 0!==i[0]){const e={name:i[0].label,code:i[0].clinical_note_code,categoryCode:i[0].clinical_category,details:i[0]};t=e}else{const t=this.clinicalNoteCategories.filter((t=>t.label===e));t}}console.log(t),""!==t&&(await this.getClinicalNoteDetails(t.code),this.clinicalNoteDetails.length>0&&(this.bools.showInputFields=!0))},async scrollToTop(){this.$refs.scrollArea.setScrollPosition("vertical",1),await this.$store.dispatch("helpers/setInfiniteScroll",!0),await this.checkCase()},async selectSubgroup(){const e=!this.selectionMenu;this.selectionMenu=e},filterCN(e){const t=e.toUpperCase();var l=this.clinicalNoteCategories.filter((e=>e.filterName.includes(t)));this.clinicalNoteCat=l,0===l.length&&(this.clinicalTabs=[])},async fetchClinicalNotesCategories(){await this.$store.dispatch("clinicalNotes/fetchClinicalCategories"),this.clinicalNoteCat=this.clinicalNoteCategories},async getClinicalNotes(e){this.loadingTabs=!0;const t={sectionType:"ehr"};await this.$store.dispatch("clinicalNotes/fetchClinicalNotes",t),this.loadingTabs=!1},async checkCase(){this.clinicalTabLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted};await this.$store.dispatch("encounters/getCases",t);const l={caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,patientNo:this.encounterCases[0].patient_no,clinicalNotecode:this.clinicalNoteDetails[0].clinical_note_code};await this.$store.dispatch("encounters/getClinicalEncounters",l);var i=this.clinicalEncounters.filter((e=>e.clinical_note_category_id===this.clinicalTabs));this.clinicalNoteHistory=i,this.clinicalTabLoading=!1},async getClinicalNoteDetails(e){console.log(e,"clinicalNoteCode"),await this.$store.dispatch("clinicalNotes/fetchClinicalNoteDetails",e)},resetFilter(){this.filter=""}}});var tl=l(4103);const ll=(0,ee.Z)(el,[["render",gt]]),il=ll;ne()(el,"components",{QCard:ae.Z,QCardSection:oe.Z,QSplitter:Be.Z,QSkeleton:tl.ZP,QInput:Me.Z,QIcon:Fe.Z,QTree:Ke.Z,QTabs:lt.Z,QTab:it.Z,QSeparator:st.Z,QTabPanels:at.Z,QTabPanel:ot.Z});const al=(0,i.aZ)({name:"EMR",components:{PatientEncounterInfo:ut,MainEMR:il},data(){return{bools:{isMultipleCaseNo:!0,isLoading:!1},clinicalNoteCategoryTree:[]}},computed:{...(0,de.Se)({visitEncounterNotes:"clinicalNotes/visitEncounterNotes",admissionEncounterNotes:"clinicalNotes/admissionEncounterNotes",generalNotes:"clinicalNotes/generalNotes",rightDrawer:"helpers/drawerRight",colorEMR:"helpers/colorEMR",clinicalNoteCategories:"clinicalNotes/clinicalNoteCategories",showClinicalNoteDetails:"helpers/showClinicalNoteDetails",userRole:"helpers/userRole",encounterCases:"encounters/encounterCases",clinicalNotes:"clinicalNotes/clinicalNotes",infiniteScroll:"helpers/infiniteScroll",clinicalEncountersPage:"encounters/clinicalEncountersPage",clinicalEncountersRows:"encounters/clinicalEncountersRows"})},mounted(){this.mountFunctions()},methods:{async mountFunctions(){await this.checkCase(),await this.fetchNotesCategories(),await this.checkPatientType()},async fetchNotesCategories(){const e={sectionID:"ehr"};await this.$store.dispatch("clinicalNotes/fetchClinicalCategoryNotes",e),await this.$store.dispatch("clinicalNotes/fetchClinicalNoteCategoryTree")},checkPatientType(){"I"===this.encounterCases[0].patient_type?this.clinicalNoteCategoryTree=this.admissionEncounterNotes:this.clinicalNoteCategoryTree=this.visitEncounterNotes,console.log(this.clinicalNoteCategoryTree)},async checkCase(){this.bools.isLoading=!0;const e=await this.$store.dispatch("helpers/decrypt",this.$route.params.caseNo),t={type:"checking",dateFrom:null,dateTo:null,userType:this.userRole,patientType:null,caseNo:e.decrypted,rowsPage:this.clinicalEncountersRows,pageNo:this.clinicalEncountersPage,paginated:1};await this.$store.dispatch("encounters/getCases",t),"emr-checked"===this.$route.name&&(this.bools.isMultipleCaseNo=!1),1===this.encounterCases.length&&(this.bools.isMultipleCaseNo=!1),this.bools.isLoading=!1},async caseRoute(e){const t=await this.$store.dispatch("helpers/encrypt",e);this.$router.push(`/emr/case/${t.encrypted}/checked`)}}});var ol=l(4379),sl=l(4752);const nl=(0,ee.Z)(al,[["render",u]]),cl=nl;ne()(al,"components",{QPage:ol.Z,QSpinnerBars:sl.Z,QBtn:le.Z})}}]);